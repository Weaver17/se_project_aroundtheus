!function(){"use strict";const e={name:document.querySelector(".profile__name"),about:document.querySelector(".profile__description"),avatar:document.querySelector(".profile__avatar-image"),_id:"203ef5b29b8491c8911cf220"},t={},r=document.querySelector("#profile-edit-modal"),s=document.querySelector("#add-card-modal"),i=document.querySelector("#profile-picture-modal"),n=r.querySelector(".modal__form"),a=s.querySelector(".modal__form"),o=i.querySelector(".modal__form"),l=document.querySelector("#profile-edit-button"),d=document.querySelector("#add-card-button"),c=document.querySelector("#modal-name"),h=document.querySelector("#modal-description"),_=(document.querySelector("#modal-title"),document.querySelector("#modal-link"),document.querySelector("#modal-image"),document.querySelector("#modal-image-title"),document.querySelector("#profile-avatar-button")),u=document.querySelector("#modal-picture");document.querySelector(".profile__avatar-image"),document.querySelector(".card__like-button"),document.querySelector(".card__delete-button"),document.querySelector(".modal__confirm");class m{constructor(e,t,r,s,i){let{name:n,link:a,isLiked:o,_id:l}=e;this._name=n,this._link=a,this._isLiked=o,this.id=l,this._cardSelector=t,this._handleImageClick=r,this._handleDeleteBtn=s,this._handleLikeBtn=i,this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeBtn(this)})),this._cardDeleteBtn.addEventListener("click",(()=>{this._handleDeleteBtn(this)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}removeCard(){this._cardElement.remove()}getCardId(){return this.id}getLikedStatus(){return this._isLiked}handleIsLiked(e){this._isLiked=e,this._renderisLiked()}_renderisLiked(){this._isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}getView(){return this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteBtn=this._cardElement.querySelector(".card__delete-button"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._renderisLiked(),this._cardElement}}class p{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputEls=Array.from(this._formElement.querySelectorAll(this._inputSelector))}disableBtn(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}_enableBtn(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableBtn(this._submitBtn,this._inactiveButtonClass):this._enableBtn(this._submitBtn,this._inactiveButtonClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._submitBtn=this._formElement.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState(),this._formElement.reset()}}class v{constructor(e,t){let{items:r,renderer:s}=e;this._items=r,this._renderer=s,this._container=document.querySelector(t)}renderItems(){this._items.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class E{constructor(e){this._popupElement=document.querySelector(e),this._closeBtn=this._popupElement.querySelector(".modal__exit"),this._modalBackground=this._popupElement.querySelector(".modal__background")}open(){document.addEventListener("keydown",this._handleEscapeClose),this._popupElement.classList.add("modal_opened")}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeBtn.addEventListener("click",(()=>{this.close()})),this._modalBackground.addEventListener("click",(()=>{this.close()}))}}class f extends E{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".modal__form"),this._submitBtn=this._popupElement.querySelector(".modal__save"),this._inputsArr=Array.from(this._form.querySelectorAll(".modal__input")),this._submitBtnText=this._submitBtn.textContent}_getInputValues(){const e={};return this._inputsArr.forEach((t=>{e[t.name]=t.value})),e}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}let b;const L=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r,this._authorization=r.authorization,this._contentType=r.contentType}_handleServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this._handleServerResponse)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}addCard(e){let{name:t,link:r}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})})}removeCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}setCardLiked(e,t){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers})}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}setUserInfo(e){let{name:t,about:r,avatar:s,_id:i}=e;return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r,avatar:s,_id:i})})}changeAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.picture})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"40adfe4e-c0e4-40a1-9506-b555db893f72","Content-Type":"application/json"}});L.getInitialCards().then((e=>{b=new v({items:e,renderer:e=>{const t=g(e);b.addItem(t)}},".gallery__cards"),b.renderItems()})).catch((e=>console.error(`Error setting up card section, ${e}`))),L.getUserInfo().then((e=>{y.setUserInfo(e)})).catch((e=>console.error(`Error loading profile info. ${e}`)));const g=e=>new m({name:e.name,link:e.link,isLiked:e.isLiked,_id:e._id},"#card-template",w,A,U).getView(),y=new class{constructor(e){let{name:t,about:r,avatar:s,_id:i}=e;this._name=t,this._about=r,this._avatar=s,this.id=i}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}setUserInfo(e){let{name:t,about:r,avatar:s}=e;t&&(this._name.textContent=t),r&&(this._about.textContent=r),s&&(this._avatar.src=s)}}(e),S=new f("#profile-picture-modal",(function(e){S.renderLoading(!0),L.changeAvatar(e).then((()=>{y.setUserInfo({avatar:e.picture}),t[o.getAttribute("name")].disableBtn(),S.close()})).catch(console.error).finally((()=>{S.renderLoading(!1)}))})),k=new f("#profile-edit-modal",(function(e){k.renderLoading(!0),L.setUserInfo(e).then((()=>{y.setUserInfo({name:e.name,about:e.about}),t[n.getAttribute("name")].disableBtn(),k.close()})).catch((e=>{console.error(`Error handling profile form submit. ${e}`)})).finally((()=>{k.renderLoading(!1)}))})),C=new f("#add-card-modal",(function(e){C.renderLoading(!0),L.addCard(e).then((e=>{const{_id:r,name:s,link:i,isLiked:n}=e,o={_id:r,name:s,link:i,isLiked:n};b.addItem(g(o)),t[a.getAttribute("name")].disableBtn(),a.reset(),C.close()})).catch((e=>{console.error(`Error: failed to add card. ${e}`)})).finally((()=>{C.renderLoading(!1)}))})),q=new class extends E{constructor(e){super(e),this._form=this._popupElement.querySelector(".modal__form"),this._confirmBtn=this._popupElement.querySelector(".modal__confirm"),this._handleDeleteConfirm=null}handleConfirm(e){this._handleDeleteConfirm=e}viewLoading(e){this._confirmBtn.textContent=e?"Deleting...":"Yes"}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),"function"==typeof this._handleDeleteConfirm&&this._handleDeleteConfirm()}))}}("#confirm-modal"),B=new class extends E{constructor(e){super(e),this._previewImage=this._popupElement.querySelector("#modal-image"),this._previewImageTitle=this._popupElement.querySelector("#modal-image-title")}open(e){let{name:t,link:r}=e;this._previewImage.alt=t,this._previewImageTitle.textContent=t,this._previewImage.src=r,super.open()}}("#image-modal");var I;function w(e){B.open({name:e._name,link:e._link})}function U(e){L.setCardLiked(e.id,e.getLikedStatus()).then((t=>{e.handleIsLiked(t.isLiked)})).catch(console.error)}function A(e){q.open(),q.handleConfirm((()=>{q.viewLoading(!0),L.removeCard(e.id).then((()=>{e.removeCard(),q.close()})).catch((e=>{console.error(`Failed to delete card. ${e}`)})).finally(q.viewLoading(!1))}))}B.setEventListeners(),k.setEventListeners(),C.setEventListeners(),S.setEventListeners(),q.setEventListeners(),I={inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:".modal__form"},Array.from(document.querySelectorAll(I.formSelector)).forEach((e=>{const r=new p(I,e),s=e.getAttribute("name");t[s]=r,r.enableValidation()})),_.addEventListener("click",(()=>{t[o.getAttribute("name")].resetValidation(),u.value=y.getUserInfo().avatar,S.open()})),l.addEventListener("click",(()=>{t[n.getAttribute("name")].resetValidation();const{name:e,about:r}=y.getUserInfo();c.value=e,h.value=r,k.open()})),d.addEventListener("click",(()=>{C.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxLQUNKOEMsRUFBS2pLLGFBQ0x3SixFQUFpQi9FLE9BQU8sSUFFekJnRSxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNLDBCQUEwQkYsSUFBTSxJQUUvQ1MsUUFBUUssRUFBaUJLLGFBQVksR0FBTyxHQUVuRCxDQXpGQUMsRUFBaUJsRixvQkFDakJ3RSxFQUFpQnhFLG9CQUNqQnlFLEVBQWlCekUsb0JBQ2pCcUUsRUFBaUJyRSxvQkFDakI0RSxFQUFpQjVFLG9CQWhCUzlELEVON0RRLENBQ2hDRyxjQUFlLGdCQUNmRSxxQkFBc0IsZUFDdEJFLG9CQUFxQix1QkFDckJFLGdCQUFpQiwwQkFDakJFLFdBQVksdUJBQ1owSSxhQUFjLGdCTXdER3ZJLE1BQU1DLEtBQUt6RSxTQUFTMEUsaUJBQWlCaEIsRUFBT3FKLGVBQ3BEckgsU0FBUy9CLElBQ2hCLE1BQU1xSixFQUFZLElBQUl2SixFQUFjQyxFQUFRQyxHQUN0Q3NKLEVBQVd0SixFQUFZbUksYUFBYSxRQUUxQ3pMLEVBQWU0TSxHQUFZRCxFQUMzQkEsRUFBVXJILGtCQUFrQixJQWlHaEMzRSxFQUFleUIsaUJBQWlCLFNBQVMsS0FDdkNwQyxFQUFlTSxFQUFtQm1MLGFBQWEsU0FBU2hHLGtCQUN4RDdFLEVBQWlCa0gsTUFBUXVELEVBQWlCdkIsY0FBY2hLLE9BQ3hEMEwsRUFBaUIxRSxNQUFNLElBR3pCdkcsRUFBZTZCLGlCQUFpQixTQUFTLEtBQ3ZDcEMsRUFBZUksRUFBZ0JxTCxhQUFhLFNBQVNoRyxrQkFDckQsTUFBTSxLQUFFL0YsRUFBSSxNQUFFRyxHQUFVd0wsRUFBaUJ2QixjQUN6Q3JKLEVBQWlCcUgsTUFBUXBJLEVBQ3pCZ0IsRUFBd0JvSCxNQUFRakksRUFDaEM4TCxFQUFpQjdFLE1BQU0sSUFHekJ0RyxFQUFXNEIsaUJBQWlCLFNBQVMsS0FDbkN3SixFQUFpQjlFLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXB3aXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwd2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjYXJkRGF0YSA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyBleHBvcnQgY29uc3QgY2FyZFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmRzXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkU2VjdGlvbjogXCIuZ2FsbGVyeV9fY2FyZHNcIixcclxuICBpbmZvU2VjdGlvbjogXCIucHJvZmlsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbmZvID0ge1xyXG4gIG5hbWU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKSxcclxuICBhYm91dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKSxcclxuICBhdmF0YXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWltYWdlXCIpLFxyXG4gIF9pZDogXCIyMDNlZjViMjliODQ5MWM4OTExY2YyMjBcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZV9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgY2FyZEFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1waWN0dXJlLW1vZGFsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRBZGRGb3JtID0gY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUGljdHVyZUZvcm0gPVxyXG4gIHByb2ZpbGVQaWN0dXJlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLW5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1kZXNjcmlwdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC10aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWxpbmtcIik7XHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlLXRpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgcGljdHVyZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHBpY3R1cmVMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXBpY3R1cmVcIik7XHJcbmV4cG9ydCBjb25zdCBwaWN0dXJlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaWtlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmREZWxldGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlybU1vZGFsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY29uZmlybVwiKTtcclxuIiwiaW1wb3J0IFBvcHVwd2l0aEZvcm0gZnJvbSBcIi4vUG9wdXB3aXRoRm9ybVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIGlzTGlrZWQsIF9pZCB9LFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUJ0bixcclxuICAgIGhhbmRsZUxpa2VCdG5cclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuaWQgPSBfaWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ0biA9IGhhbmRsZURlbGV0ZUJ0bjtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VCdG4gPSBoYW5kbGVMaWtlQnRuO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdG4odGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ0bih0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIGdldENhcmRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLmlkO1xyXG4gIH1cclxuXHJcbiAgZ2V0TGlrZWRTdGF0dXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNMaWtlZDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUlzTGlrZWQoaXNMaWtlZCkge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9yZW5kZXJpc0xpa2VkKCk7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVyaXNMaWtlZCgpIHtcclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID1cclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3JlbmRlcmlzTGlrZWQoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnRuKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ0bigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbHMpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUJ0bih0aGlzLl9zdWJtaXRCdG4sIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9lbmFibGVCdG4odGhpcy5fc3VibWl0QnRuLCB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLnJldmVyc2UoKS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2V4aXRcIik7XHJcbiAgICB0aGlzLl9tb2RhbEJhY2tncm91bmQgPVxyXG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYmFja2dyb3VuZFwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjYXBlQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX21vZGFsQmFja2dyb3VuZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cHdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZVwiKTtcclxuICAgIHRoaXMuX2lucHV0c0FyciA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKSk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG5UZXh0ID0gdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dHNBcnIuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ0blRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvLyBJTVBPUlRTIC8vXHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG5pbXBvcnQge1xyXG4gIHNlbGVjdG9ycyxcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgY2FyZEFkZEJ0bixcclxuICBwcm9maWxlSW5mbyxcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgY2FyZEFkZEZvcm0sXHJcbiAgcHJvZmlsZVBpY3R1cmVGb3JtLFxyXG4gIHByb2ZpbGVOYW1lSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgcGljdHVyZUVkaXRCdG4sXHJcbiAgcGljdHVyZUxpbmtJbnB1dCxcclxuICBwaWN0dXJlRWwsXHJcbiAgZm9ybVZhbGlkYXRvcnMsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3JcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXB3aXRoSW1hZ2VcIjtcclxuaW1wb3J0IFBvcHVwd2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXB3aXRoRm9ybVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xyXG5cclxubGV0IGNhcmRTZWN0aW9uO1xyXG5cclxuLy8gQVBJIC8vXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjQwYWRmZTRlLWMwZTQtNDBhMS05NTA2LWI1NTVkYjg5M2Y3MlwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5hcGlcclxuICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbigoY2FyZHMpID0+IHtcclxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogY2FyZHMsXHJcbiAgICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaW5pdGlhbENhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oaW5pdGlhbENhcmQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIFwiLmdhbGxlcnlfX2NhcmRzXCJcclxuICAgICk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoYEVycm9yIHNldHRpbmcgdXAgY2FyZCBzZWN0aW9uLCAke2Vycn1gKSk7XHJcblxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICBwcm9maWxlSW5mb0NsYXNzLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoYEVycm9yIGxvYWRpbmcgcHJvZmlsZSBpbmZvLiAke2Vycn1gKSk7XHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmREYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxyXG4gICAgICBsaW5rOiBjYXJkRGF0YS5saW5rLFxyXG4gICAgICBpc0xpa2VkOiBjYXJkRGF0YS5pc0xpa2VkLFxyXG4gICAgICBfaWQ6IGNhcmREYXRhLl9pZCxcclxuICAgIH0sXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQnRuLFxyXG4gICAgaGFuZGxlTGlrZUJ0blxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59O1xyXG5cclxuLy8gQ0xBU1NFUyAvL1xyXG5cclxuY29uc3QgcHJvZmlsZUluZm9DbGFzcyA9IG5ldyBVc2VySW5mbyhwcm9maWxlSW5mbyk7XHJcblxyXG5jb25zdCBwaWN0dXJlRm9ybUNsYXNzID0gbmV3IFBvcHVwd2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1waWN0dXJlLW1vZGFsXCIsXHJcbiAgaGFuZGxlUGljdHVyZVN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1DbGFzcyA9IG5ldyBQb3B1cHdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XHJcbik7XHJcblxyXG5jb25zdCBjYXJkQWRkRm9ybUNsYXNzID0gbmV3IFBvcHVwd2l0aEZvcm0oXHJcbiAgXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICBoYW5kbGVDYXJkQWRkU3VibWl0XHJcbik7XHJcblxyXG5jb25zdCBjb25maXJtRm9ybUNsYXNzID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oXCIjY29uZmlybS1tb2RhbFwiKTtcclxuXHJcbmNvbnN0IGNhcmRQcmV2aWV3Q2xhc3MgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtbW9kYWxcIik7XHJcblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8vIElOVElUSUFMSVpFIC8vXHJcbmNhcmRQcmV2aWV3Q2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucHJvZmlsZUZvcm1DbGFzcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jYXJkQWRkRm9ybUNsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBpY3R1cmVGb3JtQ2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uZmlybUZvcm1DbGFzcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uU2V0dGluZ3MpO1xyXG5cclxuLy8gRlVOQ1RJT05TIC8vXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZCkge1xyXG4gIGNhcmRQcmV2aWV3Q2xhc3Mub3Blbih7IG5hbWU6IGNhcmQuX25hbWUsIGxpbms6IGNhcmQuX2xpbmsgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRBZGRTdWJtaXQoaW5wdXREYXRhKSB7XHJcbiAgY2FyZEFkZEZvcm1DbGFzcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQoaW5wdXREYXRhKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgY29uc3QgeyBfaWQsIG5hbWUsIGxpbmssIGlzTGlrZWQgfSA9IGRhdGE7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmREYXRhID0geyBfaWQsIG5hbWUsIGxpbmssIGlzTGlrZWQgfTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKG5ld0NhcmREYXRhKSk7XHJcbiAgICAgIGZvcm1WYWxpZGF0b3JzW2NhcmRBZGRGb3JtLmdldEF0dHJpYnV0ZShcIm5hbWVcIildLmRpc2FibGVCdG4oKTtcclxuICAgICAgY2FyZEFkZEZvcm0ucmVzZXQoKTtcclxuICAgICAgY2FyZEFkZEZvcm1DbGFzcy5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yOiBmYWlsZWQgdG8gYWRkIGNhcmQuICR7ZXJyfWApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY2FyZEFkZEZvcm1DbGFzcy5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XHJcbiAgcHJvZmlsZUZvcm1DbGFzcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnNldFVzZXJJbmZvKGRhdGEpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVJbmZvQ2xhc3Muc2V0VXNlckluZm8oeyBuYW1lOiBkYXRhLm5hbWUsIGFib3V0OiBkYXRhLmFib3V0IH0pO1xyXG4gICAgICBmb3JtVmFsaWRhdG9yc1twcm9maWxlRWRpdEZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0uZGlzYWJsZUJ0bigpO1xyXG4gICAgICBwcm9maWxlRm9ybUNsYXNzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaGFuZGxpbmcgcHJvZmlsZSBmb3JtIHN1Ym1pdC4gJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlRm9ybUNsYXNzLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBpY3R1cmVTdWJtaXQoYXZhdGFyVXJsKSB7XHJcbiAgcGljdHVyZUZvcm1DbGFzcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmNoYW5nZUF2YXRhcihhdmF0YXJVcmwpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVJbmZvQ2xhc3Muc2V0VXNlckluZm8oeyBhdmF0YXI6IGF2YXRhclVybC5waWN0dXJlIH0pO1xyXG4gICAgICBmb3JtVmFsaWRhdG9yc1twcm9maWxlUGljdHVyZUZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0uZGlzYWJsZUJ0bigpO1xyXG4gICAgICBwaWN0dXJlRm9ybUNsYXNzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBpY3R1cmVGb3JtQ2xhc3MucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUJ0bihjYXJkKSB7XHJcbiAgYXBpXHJcbiAgICAuc2V0Q2FyZExpa2VkKGNhcmQuaWQsIGNhcmQuZ2V0TGlrZWRTdGF0dXMoKSlcclxuICAgIC50aGVuKCh1cGRhdGVkQ2FyZCkgPT4ge1xyXG4gICAgICBjYXJkLmhhbmRsZUlzTGlrZWQodXBkYXRlZENhcmQuaXNMaWtlZCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVCdG4oY2FyZCkge1xyXG4gIGNvbmZpcm1Gb3JtQ2xhc3Mub3BlbigpO1xyXG4gIGNvbmZpcm1Gb3JtQ2xhc3MuaGFuZGxlQ29uZmlybSgoKSA9PiB7XHJcbiAgICBjb25maXJtRm9ybUNsYXNzLnZpZXdMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5yZW1vdmVDYXJkKGNhcmQuaWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLnJlbW92ZUNhcmQoKTtcclxuICAgICAgICBjb25maXJtRm9ybUNsYXNzLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBjYXJkLiAke2Vycn1gKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoY29uZmlybUZvcm1DbGFzcy52aWV3TG9hZGluZyhmYWxzZSkpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBMSVNURU5FUlMgLy9cclxucGljdHVyZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1twcm9maWxlUGljdHVyZUZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcGljdHVyZUxpbmtJbnB1dC52YWx1ZSA9IHByb2ZpbGVJbmZvQ2xhc3MuZ2V0VXNlckluZm8oKS5hdmF0YXI7XHJcbiAgcGljdHVyZUZvcm1DbGFzcy5vcGVuKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1twcm9maWxlRWRpdEZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gcHJvZmlsZUluZm9DbGFzcy5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gYWJvdXQ7XHJcbiAgcHJvZmlsZUZvcm1DbGFzcy5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY2FyZEFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNhcmRBZGRGb3JtQ2xhc3Mub3BlbigpO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIHRoaXMuX2F1dGhvcml6YXRpb24gPSBoZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgICB0aGlzLl9jb250ZW50VHlwZSA9IGhlYWRlcnMuY29udGVudFR5cGU7XHJcbiAgfVxyXG5cclxuICAvLyBHRU5FUkFMIFBST01JU0VTIC8vXHJcbiAgX2hhbmRsZVNlcnZlclJlc3BvbnNlKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRBcHBJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcclxuICB9XHJcblxyXG4gIC8vIENBUkRTIC8vXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0Q2FyZExpa2VkKGNhcmRJZCwgaXNMaWtlZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gVVNFUiBJTkZPIC8vXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyLCBfaWQgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBhYm91dCxcclxuICAgICAgICBhdmF0YXIsXHJcbiAgICAgICAgX2lkLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlQXZhdGFyKGF2YXRhclVybCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogYXZhdGFyVXJsLnBpY3R1cmUsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0LCBhdmF0YXIsIF9pZCB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2Fib3V0ID0gYWJvdXQ7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBhdmF0YXI7XHJcbiAgICB0aGlzLmlkID0gX2lkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyLnNyYyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xyXG4gICAgaWYgKG5hbWUpIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgaWYgKGFib3V0KSB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gICAgaWYgKGF2YXRhcikgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fY29uZmlybUJ0biA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb25maXJtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDb25maXJtKGhhbmRsZURlbGV0ZUNvbmZpcm0pIHtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm0gPSBoYW5kbGVEZWxldGVDb25maXJtO1xyXG4gIH1cclxuXHJcbiAgdmlld0xvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX2NvbmZpcm1CdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jb25maXJtQnRuLnRleHRDb250ZW50ID0gXCJZZXNcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZiAodHlwZW9mIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm0gPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm0oKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlID1cclxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtaW1hZ2UtdGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xyXG5cclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInByb2ZpbGVJbmZvIiwibmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFib3V0IiwiYXZhdGFyIiwiX2lkIiwiZm9ybVZhbGlkYXRvcnMiLCJwcm9maWxlRWRpdE1vZGFsIiwiY2FyZEFkZE1vZGFsIiwicHJvZmlsZVBpY3R1cmVNb2RhbCIsInByb2ZpbGVFZGl0Rm9ybSIsImNhcmRBZGRGb3JtIiwicHJvZmlsZVBpY3R1cmVGb3JtIiwicHJvZmlsZUVkaXRCdG4iLCJjYXJkQWRkQnRuIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicGljdHVyZUVkaXRCdG4iLCJwaWN0dXJlTGlua0lucHV0IiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVCdG4iLCJoYW5kbGVMaWtlQnRuIiwibGluayIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9pc0xpa2VkIiwiaWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQnRuIiwiX2hhbmRsZUxpa2VCdG4iLCJfY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRMaWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkRGVsZXRlQnRuIiwiX2NhcmRJbWFnZUVsIiwicmVtb3ZlQ2FyZCIsInJlbW92ZSIsImdldENhcmRJZCIsImdldExpa2VkU3RhdHVzIiwiaGFuZGxlSXNMaWtlZCIsIl9yZW5kZXJpc0xpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwiZ2V0VmlldyIsIl9jYXJkVGl0bGVFbCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0RWxzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImRpc2FibGVCdG4iLCJfc3VibWl0QnRuIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnRuIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiaW5wdXRFbGVtZW50IiwicmVzZXQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnRuIiwiX21vZGFsQmFja2dyb3VuZCIsIm9wZW4iLCJfaGFuZGxlRXNjYXBlQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwd2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0c0FyciIsIl9zdWJtaXRCdG5UZXh0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY2FyZFNlY3Rpb24iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfYXV0aG9yaXphdGlvbiIsImF1dGhvcml6YXRpb24iLCJfY29udGVudFR5cGUiLCJjb250ZW50VHlwZSIsIl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsInVybCIsIm9wdGlvbnMiLCJmZXRjaCIsInRoZW4iLCJnZXRBcHBJbmZvIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJhZGRDYXJkIiwiX3JlZjIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsInNldENhcmRMaWtlZCIsInNldFVzZXJJbmZvIiwiX3JlZjMiLCJjaGFuZ2VBdmF0YXIiLCJhdmF0YXJVcmwiLCJwaWN0dXJlIiwiY2FyZHMiLCJjYXJkRGF0YSIsImluaXRpYWxDYXJkIiwiY3JlYXRlQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZGF0YSIsInByb2ZpbGVJbmZvQ2xhc3MiLCJfYWJvdXQiLCJfYXZhdGFyIiwicGljdHVyZUZvcm1DbGFzcyIsImdldEF0dHJpYnV0ZSIsImZpbmFsbHkiLCJwcm9maWxlRm9ybUNsYXNzIiwiY2FyZEFkZEZvcm1DbGFzcyIsImlucHV0RGF0YSIsIm5ld0NhcmREYXRhIiwiY29uZmlybUZvcm1DbGFzcyIsIl9jb25maXJtQnRuIiwiX2hhbmRsZURlbGV0ZUNvbmZpcm0iLCJoYW5kbGVDb25maXJtIiwiaGFuZGxlRGVsZXRlQ29uZmlybSIsInZpZXdMb2FkaW5nIiwiY2FyZFByZXZpZXdDbGFzcyIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld0ltYWdlVGl0bGUiLCJjYXJkIiwidXBkYXRlZENhcmQiLCJmb3JtU2VsZWN0b3IiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=