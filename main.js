!function(){"use strict";const e=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],t={name:document.querySelector(".profile__name"),description:document.querySelector(".profile__description"),avatar:document.querySelector(".profile__avatar-image"),_id:"203ef5b29b8491c8911cf220"},s={inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=document.querySelector("#profile-edit-modal"),n=document.querySelector("#add-card-modal"),i=document.querySelector("#profile-picture-modal"),a=r.querySelector(".modal__form"),o=n.querySelector(".modal__form"),l=i.querySelector(".modal__form"),c=document.querySelector("#profile-edit-button"),d=document.querySelector("#add-card-button"),h=(n.querySelector("#card-form"),document.querySelector("#modal-name")),m=document.querySelector("#modal-description"),u=(document.querySelector("#modal-title"),document.querySelector("#modal-link"),document.querySelector("#modal-image"),document.querySelector("#modal-image-title"),document.querySelector("#profile-avatar-button")),_=document.querySelector("#modal-picture"),p=document.querySelector(".profile__avatar-image");document.querySelector(".card__like-button"),document.querySelector(".card__delete-button"),document.querySelector("#confirm-modal-form");class v{constructor(e,t,s,r,n){let{name:i,link:a,isLiked:o,_id:l}=e;this._name=i,this._link=a,this._isLiked=o,this.id=l,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteBtn=r,this._handleLikeBtn=n,this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardLikeButton.addEventListener("click",this._handleLikeBtn(this)),this._cardDeleteBtn.addEventListener("click",this._handleDeleteBtn(this)),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}removeCard(){this._cardElement.remove()}getCardId(){return this.id}getLikedStatus(){return this._isLiked}handleIsLiked(e){this._isLiked=e,this._renderisLiked()}_renderisLiked(){this._isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}getView(){return this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteBtn=this._cardElement.querySelector(".card__delete-button"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._renderisLiked(),this._cardElement}}class f{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}disableBtn(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}_enableBtn(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableBtn(this._submitBtn,this._inactiveButtonClass):this._enableBtn(this._submitBtn,this._inactiveButtonClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._inputEls=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitBtn=this._formElement.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this.disableBtn()})),this._setEventListeners()}}class E{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class S{constructor(e){this._popupElement=document.querySelector(e),this._closeBtn=this._popupElement.querySelector(".modal__exit"),this._modalBackground=this._popupElement.querySelector(".modal__background")}open(){document.addEventListener("keydown",this._handleEscapeClose),this._popupElement.classList.add("modal_opened")}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeBtn.addEventListener("click",(()=>{this.close()})),this._modalBackground.addEventListener("click",(()=>{this.close()}))}}class g extends S{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".modal__form"),this._submitBtn=this._popupElement.querySelector(".modal__save")}_getInputValues(){const e=Array.from(this._form.querySelectorAll(".modal__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}viewLoading(e){this._submitBtn.textContent=e?"Saving...":"Save"}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}const y=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s,this._authorization=s.authorization,this._contentType=s.contentType}_handleServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleServerResponse).catch((e=>console.error(e)))}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleServerResponse).catch((e=>console.error(e)))}removeCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleServerResponse).catch((e=>console.error(e)))}addLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes/`,{method:"PUT",headers:this._headers,body:JSON.stringify({isLiked:!0})}).then(this._handleServerResponse).catch((e=>console.error(e)))}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes/`,{method:"DELETE",headers:this._headers,body:JSON.stringify({isLiked:!1})}).then(this._handleServerResponse).catch((e=>console.error(e)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._handleServerResponse).catch((e=>console.error(e)))}setUserInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,description:t})}).then(this._handleServerResponse).catch((e=>console.error(e)))}changeAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse).catch((e=>console.error(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"40adfe4e-c0e4-40a1-9506-b555db893f72","Content-Type":"application/json"}});y.getInitialCards().then((()=>{const t=new E({items:e,renderer:e=>{const s=L(e);t.addItem(s)}},".gallery__cards");t.renderItems()})).catch((e=>console.error(e))),y.getUserInfo().then((e=>{console.log(e),k.setUserInfo(e.name,e.about),k.setAvatar(e.avatar)})).catch((e=>console.error(e)));const L=e=>new v({name:e.name,link:e.link,isLiked:e.isLiked,_id:e._id},"#card-template",$,T,x).getView(),k=new class{constructor(e){let{name:t,description:s,avatar:r}=e;this._name=t,this._job=s,this._avatar=r}getUserInfo(){return{name:this._name.textContent,description:this._job.textContent}}setUserInfo(e,t){this._name.textContent=e,this._job.textContent=t}setAvatar(e){this._avatar.src=e}}(t),b=new g("#profile-picture-modal",(function(e){y.changeAvatar(e).then((e=>{k.setAvatar(e.src)}))})),C=new g("#profile-edit-modal",(function(e){C.viewLoading(!0),y.setUserInfo(e.name,e.about).then((e=>{k.setUserInfo(e.name,e.about),I.disableBtn(),C.close()})).catch((e=>{console.error(e)})).finally((()=>{k.viewLoading(!1)}))})),w=new g("#add-card-modal",(function(e){w.viewLoading(!0),y.addCard(e).then((e=>{cardSection.addItem(L({name:e.name,link:e.link})),U.disableBtn(),w.reset(),w.close()})).catch((e=>{console.error(e)})).finally((()=>{w.viewLoading(!1)}))})),B=new class extends S{constructor(e){super(e),this._form=this._popupElement.querySelector(".modal__form"),this._confirmBtn=this._popupElement.querySelector(".modal__confirm")}handleConfirm(e){this._handleDeleteConfirm=e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleDeleteConfirm}))}}("#confirm-modal"),q=new class extends S{constructor(e){super(e),this._previewImage=this._popupElement.querySelector("#modal-image"),this._previewImageTitle=this._popupElement.querySelector("#modal-image-title")}open(e){let{name:t,link:s}=e;this._previewImage.alt=t,this._previewImageTitle.textContent=t,this._previewImage.src=s,super.open()}}("#image-modal"),I=new f(s,a),U=new f(s,o),j=new f(s,l);function $(e){q.open({name:e._name,link:e._link})}function x(e){const t=e.getCardId();e.getLikedStatus(),console.log(t)}function T(e){B.open(),B.handleConfirm((()=>{y.removeCard(e._id)}))}q.setEventListeners(),C.setEventListeners(),w.setEventListeners(),b.setEventListeners(),B.setEventListeners(),I.enableValidation(),U.enableValidation(),j.enableValidation(),u.addEventListener("click",(()=>{_.value=p.src,b.open()})),c.addEventListener("click",(()=>{const{name:e,description:t}=k.getUserInfo();h.value=e,m.value=t,C.open()})),d.addEventListener("click",(()=>{w.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUloRixXQUFXbUosRUFBS2hNLElBQUksR0FFNUIsQ0F2RkE0TCxFQUFpQjVFLG9CQUNqQmdFLEVBQWlCaEUsb0JBQ2pCb0UsRUFBaUJwRSxvQkFDakI4RCxFQUFpQjlELG9CQUNqQnVFLEVBQWlCdkUsb0JBQ2pCa0UsRUFBa0IzRixtQkFDbEI4RixFQUFpQjlGLG1CQUNqQndHLEVBQXFCeEcsbUJBbUZyQnRFLEVBQWV5QixpQkFBaUIsU0FBUyxLQUN2Q3hCLEVBQWlCd0csTUFBUXZHLEVBQVVvQyxJQUNuQ3VILEVBQWlCbkUsTUFBTSxJQUd6QjlGLEVBQWU2QixpQkFBaUIsU0FBUyxLQUN2QyxNQUFNLEtBQUVqRCxFQUFJLFlBQUVLLEdBQWdCMEssRUFBaUJ4QixjQUMvQ2pJLEVBQWlCMkcsTUFBUWpJLEVBQ3pCdUIsRUFBd0IwRyxNQUFRNUgsRUFDaENrTCxFQUFpQnJFLE1BQU0sSUFHekI3RixFQUFXNEIsaUJBQWlCLFNBQVMsS0FDbkMwSSxFQUFpQnpFLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXB3aXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwd2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjYXJkRGF0YSA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyBleHBvcnQgY29uc3QgY2FyZFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmRzXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkU2VjdGlvbjogXCIuZ2FsbGVyeV9fY2FyZHNcIixcclxuICBpbmZvU2VjdGlvbjogXCIucHJvZmlsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbmZvID0ge1xyXG4gIG5hbWU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKSxcclxuICBkZXNjcmlwdGlvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKSxcclxuICBhdmF0YXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWltYWdlXCIpLFxyXG4gIF9pZDogXCIyMDNlZjViMjliODQ5MWM4OTExY2YyMjBcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZV9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgY2FyZEFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1waWN0dXJlLW1vZGFsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRGb3JtRWwgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRGb3JtRWwgPSBjYXJkQWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IHBpY3R1cmVGb3JtRWwgPSBwcm9maWxlUGljdHVyZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkRm9ybSA9IGNhcmRBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLW5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1kZXNjcmlwdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC10aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWxpbmtcIik7XHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlLXRpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgcGljdHVyZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHBpY3R1cmVMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXBpY3R1cmVcIik7XHJcbmV4cG9ydCBjb25zdCBwaWN0dXJlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaWtlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmREZWxldGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlybU1vZGFsRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1tb2RhbC1mb3JtXCIpO1xyXG4iLCJpbXBvcnQgUG9wdXB3aXRoRm9ybSBmcm9tIFwiLi9Qb3B1cHdpdGhGb3JtXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgbmFtZSwgbGluaywgaXNMaWtlZCwgX2lkIH0sXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQnRuLFxyXG4gICAgaGFuZGxlTGlrZUJ0blxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgdGhpcy5pZCA9IF9pZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQnRuID0gaGFuZGxlRGVsZXRlQnRuO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUJ0biA9IGhhbmRsZUxpa2VCdG47XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdG4odGhpcykpO1xyXG5cclxuICAgIHRoaXMuX2NhcmREZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZUJ0bih0aGlzKSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaWQ7XHJcbiAgfVxyXG5cclxuICBnZXRMaWtlZFN0YXR1cygpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlSXNMaWtlZChpc0xpa2VkKSB7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuX3JlbmRlcmlzTGlrZWQoKTtcclxuICB9XHJcblxyXG4gIF9yZW5kZXJpc0xpa2VkKCkge1xyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPVxyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcmVuZGVyaXNMaWtlZCgpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGRpc2FibGVCdG4oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlQnRuKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnRuKHRoaXMuX3N1Ym1pdEJ0biwgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX2VuYWJsZUJ0bih0aGlzLl9zdWJtaXRCdG4sIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUJ0bigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZXhpdFwiKTtcclxuICAgIHRoaXMuX21vZGFsQmFja2dyb3VuZCA9XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19iYWNrZ3JvdW5kXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NhcGVDbG9zZSA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbW9kYWxCYWNrZ3JvdW5kLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwd2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzQXJyID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpKTtcclxuXHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG5cclxuICAgIGlucHV0c0Fyci5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICB2aWV3TG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy8gSU1QT1JUUyAvL1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBjYXJkRGF0YSxcclxuICBzZWxlY3RvcnMsXHJcbiAgZWRpdEZvcm1FbCxcclxuICBhZGRGb3JtRWwsXHJcbiAgcGljdHVyZUZvcm1FbCxcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgY2FyZEFkZEJ0bixcclxuICBwcm9maWxlSW5mbyxcclxuICBjYXJkQWRkRm9ybSxcclxuICBwcm9maWxlTmFtZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIHBpY3R1cmVFZGl0QnRuLFxyXG4gIHBpY3R1cmVMaW5rSW5wdXQsXHJcbiAgcGljdHVyZUVsLFxyXG4gIGNhcmRMaWtlQnRuLFxyXG4gIGNhcmREZWxldGVCdG4sXHJcbiAgY29uZmlybU1vZGFsRm9ybSxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmRcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvclwiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cHdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgUG9wdXB3aXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cHdpdGhGb3JtXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCI7XHJcblxyXG4vLyBBUEkgLy9cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiNDBhZGZlNGUtYzBlNC00MGExLTk1MDYtYjU1NWRiODkzZjcyXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKCgpID0+IHtcclxuICAgIGNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogY2FyZERhdGEsXHJcbiAgICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaW5pdGlhbENhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oaW5pdGlhbENhcmQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIFwiLmdhbGxlcnlfX2NhcmRzXCJcclxuICAgICk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcblxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgIHByb2ZpbGVJbmZvQ2xhc3Muc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmFib3V0KTtcclxuICAgIHByb2ZpbGVJbmZvQ2xhc3Muc2V0QXZhdGFyKGRhdGEuYXZhdGFyKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcclxuICAgICAgbGluazogY2FyZERhdGEubGluayxcclxuICAgICAgaXNMaWtlZDogY2FyZERhdGEuaXNMaWtlZCxcclxuICAgICAgX2lkOiBjYXJkRGF0YS5faWQsXHJcbiAgICB9LFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUJ0bixcclxuICAgIGhhbmRsZUxpa2VCdG5cclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufTtcclxuXHJcbi8vIENMQVNTRVMgLy9cclxuXHJcbmNvbnN0IHByb2ZpbGVJbmZvQ2xhc3MgPSBuZXcgVXNlckluZm8ocHJvZmlsZUluZm8pO1xyXG5cclxuY29uc3QgcGljdHVyZUZvcm1DbGFzcyA9IG5ldyBQb3B1cHdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtcGljdHVyZS1tb2RhbFwiLFxyXG4gIGhhbmRsZVBpY3R1cmVTdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtQ2xhc3MgPSBuZXcgUG9wdXB3aXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgY2FyZEFkZEZvcm1DbGFzcyA9IG5ldyBQb3B1cHdpdGhGb3JtKFxyXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXHJcbiAgaGFuZGxlQ2FyZEFkZFN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgY29uZmlybUZvcm1DbGFzcyA9IG5ldyBQb3B1cFdpdGhDb25maXJtKFwiI2NvbmZpcm0tbW9kYWxcIik7XHJcblxyXG5jb25zdCBjYXJkUHJldmlld0NsYXNzID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIpO1xyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRGb3JtRWwpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhZGRGb3JtRWwpO1xyXG5jb25zdCBwaWN0dXJlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBwaWN0dXJlRm9ybUVsXHJcbik7XHJcblxyXG4vLyBJTlRJVElBTElaRSAvL1xyXG5jYXJkUHJldmlld0NsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVGb3JtQ2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY2FyZEFkZEZvcm1DbGFzcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5waWN0dXJlRm9ybUNsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbmZpcm1Gb3JtQ2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucGljdHVyZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gRlVOQ1RJT05TIC8vXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZCkge1xyXG4gIGNhcmRQcmV2aWV3Q2xhc3Mub3Blbih7IG5hbWU6IGNhcmQuX25hbWUsIGxpbms6IGNhcmQuX2xpbmsgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRBZGRTdWJtaXQoZGF0YSkge1xyXG4gIGNhcmRBZGRGb3JtQ2xhc3Mudmlld0xvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZChkYXRhKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKHsgbmFtZTogZGF0YS5uYW1lLCBsaW5rOiBkYXRhLmxpbmsgfSkpO1xyXG4gICAgICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdG4oKTtcclxuICAgICAgY2FyZEFkZEZvcm1DbGFzcy5yZXNldCgpO1xyXG4gICAgICBjYXJkQWRkRm9ybUNsYXNzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY2FyZEFkZEZvcm1DbGFzcy52aWV3TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoaW5wdXREYXRhKSB7XHJcbiAgcHJvZmlsZUZvcm1DbGFzcy52aWV3TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5zZXRVc2VySW5mbyhpbnB1dERhdGEubmFtZSwgaW5wdXREYXRhLmFib3V0KVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgcHJvZmlsZUluZm9DbGFzcy5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQpO1xyXG4gICAgICBlZGl0Rm9ybVZhbGlkYXRvci5kaXNhYmxlQnRuKCk7XHJcbiAgICAgIHByb2ZpbGVGb3JtQ2xhc3MuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlSW5mb0NsYXNzLnZpZXdMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQaWN0dXJlU3VibWl0KGltYWdlKSB7XHJcbiAgYXBpLmNoYW5nZUF2YXRhcihpbWFnZSkudGhlbigoYXZhdGFyKSA9PiB7XHJcbiAgICBwcm9maWxlSW5mb0NsYXNzLnNldEF2YXRhcihhdmF0YXIuc3JjKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUJ0bihjYXJkKSB7XHJcbiAgY29uc3QgY2FyZElkID0gY2FyZC5nZXRDYXJkSWQoKTtcclxuICBjb25zdCBpc0xpa2VkID0gY2FyZC5nZXRMaWtlZFN0YXR1cygpO1xyXG4gIGNvbnNvbGUubG9nKGNhcmRJZCk7XHJcblxyXG4gIC8vIGlmIChpc0xpa2VkKSB7XHJcbiAgLy8gICBhcGlcclxuICAvLyAgICAgLnJlbW92ZUxpa2UoY2FyZElkKVxyXG4gIC8vICAgICAudGhlbigoaXNMaWtlZENhcmQpID0+IHtcclxuICAvLyAgICAgICBjYXJkLmhhbmRsZUlzTGlrZWQoaXNMaWtlZENhcmQuZ2V0TGlrZWRTdGF0dXMpO1xyXG4gIC8vICAgICB9KVxyXG4gIC8vICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gIC8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAvLyAgICAgfSk7XHJcbiAgLy8gfSBlbHNlIHtcclxuICAvLyAgIGFwaVxyXG4gIC8vICAgICAuYWRkTGlrZShjYXJkSWQpXHJcbiAgLy8gICAgIC50aGVuKChpc0xpa2VkQ2FyZCkgPT4ge1xyXG4gIC8vICAgICAgIGNhcmQuaGFuZGxlSXNMaWtlZChpc0xpa2VkQ2FyZC5nZXRMaWtlZFN0YXR1cyk7XHJcbiAgLy8gICAgIH0pXHJcbiAgLy8gICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgLy8gICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIC8vICAgICB9KTtcclxuICAvLyB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUJ0bihjYXJkKSB7XHJcbiAgY29uZmlybUZvcm1DbGFzcy5vcGVuKCk7XHJcblxyXG4gIGNvbmZpcm1Gb3JtQ2xhc3MuaGFuZGxlQ29uZmlybSgoKSA9PiB7XHJcbiAgICBhcGkucmVtb3ZlQ2FyZChjYXJkLl9pZCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vIExJU1RFTkVSUyAvL1xyXG5waWN0dXJlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBpY3R1cmVMaW5rSW5wdXQudmFsdWUgPSBwaWN0dXJlRWwuc3JjO1xyXG4gIHBpY3R1cmVGb3JtQ2xhc3Mub3BlbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiB9ID0gcHJvZmlsZUluZm9DbGFzcy5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XHJcbiAgcHJvZmlsZUZvcm1DbGFzcy5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY2FyZEFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNhcmRBZGRGb3JtQ2xhc3Mub3BlbigpO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIHRoaXMuX2F1dGhvcml6YXRpb24gPSBoZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgICB0aGlzLl9jb250ZW50VHlwZSA9IGhlYWRlcnMuY29udGVudFR5cGU7XHJcbiAgfVxyXG5cclxuICAvLyBHRU5FUkFMIFBST01JU0VTIC8vXHJcbiAgX2hhbmRsZVNlcnZlclJlc3BvbnNlKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEFwcEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ0FSRFMgLy9cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlcy9gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGlzTGlrZWQ6IHRydWUsXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXMvYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBpc0xpa2VkOiBmYWxzZSxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgfVxyXG5cclxuICAvLyBVU0VSIElORk8gLy9cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIHN1Ym1pdCAtLSBvbmxvYWQgPSBidXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGRlc2NyaXB0aW9uLCBhdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2IgPSBkZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuX2F2YXRhciA9IGF2YXRhcjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2pvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcihhdmF0YXJVcmwpIHtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXJVcmw7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2NvbmZpcm1CdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY29uZmlybVwiKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNvbmZpcm0oaGFuZGxlRGVsZXRlQ29uZmlybSkge1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybSA9IGhhbmRsZURlbGV0ZUNvbmZpcm07XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VUaXRsZSA9XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlLXRpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcclxuXHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjYXJkRGF0YSIsIm5hbWUiLCJsaW5rIiwicHJvZmlsZUluZm8iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkZXNjcmlwdGlvbiIsImF2YXRhciIsIl9pZCIsInZhbGlkYXRpb25TZXR0aW5ncyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicHJvZmlsZUVkaXRNb2RhbCIsImNhcmRBZGRNb2RhbCIsInByb2ZpbGVQaWN0dXJlTW9kYWwiLCJlZGl0Rm9ybUVsIiwiYWRkRm9ybUVsIiwicGljdHVyZUZvcm1FbCIsInByb2ZpbGVFZGl0QnRuIiwiY2FyZEFkZEJ0biIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInBpY3R1cmVFZGl0QnRuIiwicGljdHVyZUxpbmtJbnB1dCIsInBpY3R1cmVFbCIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQnRuIiwiaGFuZGxlTGlrZUJ0biIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9pc0xpa2VkIiwiaWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQnRuIiwiX2hhbmRsZUxpa2VCdG4iLCJfY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRMaWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkRGVsZXRlQnRuIiwiX2NhcmRJbWFnZUVsIiwicmVtb3ZlQ2FyZCIsInJlbW92ZSIsImdldENhcmRJZCIsImdldExpa2VkU3RhdHVzIiwiaGFuZGxlSXNMaWtlZCIsIl9yZW5kZXJpc0xpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwiZ2V0VmlldyIsIl9jYXJkVGl0bGVFbCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsImRpc2FibGVCdG4iLCJfc3VibWl0QnRuIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnRuIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ0biIsIl9tb2RhbEJhY2tncm91bmQiLCJvcGVuIiwiX2hhbmRsZUVzY2FwZUNsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cHdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0c0FyciIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInZpZXdMb2FkaW5nIiwiaXNMb2FkaW5nIiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2F1dGhvcml6YXRpb24iLCJhdXRob3JpemF0aW9uIiwiX2NvbnRlbnRUeXBlIiwiY29udGVudFR5cGUiLCJfaGFuZGxlU2VydmVyUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0QXBwSW5mbyIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJ0aGVuIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJhZGRDYXJkIiwiX3JlZjIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwic2V0VXNlckluZm8iLCJjaGFuZ2VBdmF0YXIiLCJfY2hlY2tSZXNwb25zZSIsImNhcmRTZWN0aW9uIiwiaW5pdGlhbENhcmQiLCJjcmVhdGVDYXJkIiwiZGF0YSIsImxvZyIsInByb2ZpbGVJbmZvQ2xhc3MiLCJhYm91dCIsInNldEF2YXRhciIsIl9qb2IiLCJfYXZhdGFyIiwiYXZhdGFyVXJsIiwicGljdHVyZUZvcm1DbGFzcyIsImltYWdlIiwicHJvZmlsZUZvcm1DbGFzcyIsImlucHV0RGF0YSIsImVkaXRGb3JtVmFsaWRhdG9yIiwiZmluYWxseSIsImNhcmRBZGRGb3JtQ2xhc3MiLCJhZGRGb3JtVmFsaWRhdG9yIiwicmVzZXQiLCJjb25maXJtRm9ybUNsYXNzIiwiX2NvbmZpcm1CdG4iLCJoYW5kbGVDb25maXJtIiwiaGFuZGxlRGVsZXRlQ29uZmlybSIsIl9oYW5kbGVEZWxldGVDb25maXJtIiwiY2FyZFByZXZpZXdDbGFzcyIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld0ltYWdlVGl0bGUiLCJwaWN0dXJlRm9ybVZhbGlkYXRvciIsImNhcmQiXSwic291cmNlUm9vdCI6IiJ9