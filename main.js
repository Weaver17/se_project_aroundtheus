!function(){"use strict";const e={name:document.querySelector(".profile__name"),about:document.querySelector(".profile__description"),avatar:document.querySelector(".profile__avatar-image"),_id:"203ef5b29b8491c8911cf220"},t={},r=document.querySelector("#profile-edit-modal"),s=document.querySelector("#add-card-modal"),i=document.querySelector("#profile-picture-modal"),n=r.querySelector(".modal__form"),a=s.querySelector(".modal__form"),o=i.querySelector(".modal__form"),l=document.querySelector("#profile-edit-button"),d=document.querySelector("#add-card-button"),c=(document.querySelector("#modal-name"),document.querySelector("#modal-description"),document.querySelector("#modal-title"),document.querySelector("#modal-link"),document.querySelector("#modal-image"),document.querySelector("#modal-image-title"),document.querySelector("#profile-avatar-button")),h=document.querySelector("#modal-picture");document.querySelector(".profile__avatar-image"),document.querySelector(".card__like-button"),document.querySelector(".card__delete-button"),document.querySelector(".modal__confirm");class u{constructor(e,t,r,s,i){let{name:n,link:a,isLiked:o,_id:l}=e;this._name=n,this._link=a,this._isLiked=o,this.id=l,this._cardSelector=t,this._handleImageClick=r,this._handleDeleteBtn=s,this._handleLikeBtn=i,this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeBtn(this)})),this._cardDeleteBtn.addEventListener("click",(()=>{this._handleDeleteBtn(this)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}removeCard(){this._cardElement.remove()}getCardId(){return this.id}getLikedStatus(){return this._isLiked}handleIsLiked(e){this._isLiked=e,this._renderisLiked()}_renderisLiked(){this._isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}getView(){return this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteBtn=this._cardElement.querySelector(".card__delete-button"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._renderisLiked(),this._cardElement}}class _{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputEls=Array.from(this._formElement.querySelectorAll(this._inputSelector))}disableBtn(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}_enableBtn(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableBtn(this._submitBtn,this._inactiveButtonClass):this._enableBtn(this._submitBtn,this._inactiveButtonClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._submitBtn=this._formElement.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState(),this._formElement.reset()}}class m{constructor(e,t){let{items:r,renderer:s}=e;this._items=r,this._renderer=s,this._container=document.querySelector(t)}renderItems(){this._items.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class p{constructor(e){this._popupElement=document.querySelector(e),this._closeBtn=this._popupElement.querySelector(".modal__exit"),this._modalBackground=this._popupElement.querySelector(".modal__background")}open(){document.addEventListener("keydown",this._handleEscapeClose),this._popupElement.classList.add("modal_opened")}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeBtn.addEventListener("click",(()=>{this.close()})),this._modalBackground.addEventListener("click",(()=>{this.close()}))}}class v extends p{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".modal__form"),this._submitBtn=this._popupElement.querySelector(".modal__save"),this._inputsArr=Array.from(this._form.querySelectorAll(".modal__input")),this._submitBtnText=this._submitBtn.textContent}_getInputValues(){const e={};return this._inputsArr.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputsArr.forEach((t=>{t.value=e[t.name]}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}let E;const f=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r,this._authorization=r.authorization,this._contentType=r.contentType}_handleServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this._handleServerResponse)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}addCard(e){let{name:t,link:r}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})})}removeCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}setCardLiked(e,t){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers})}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}setUserInfo(e){let{name:t,about:r,avatar:s,_id:i}=e;return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r,avatar:s,_id:i})})}changeAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.picture})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"40adfe4e-c0e4-40a1-9506-b555db893f72","Content-Type":"application/json"}});f.getInitialCards().then((e=>{E=new m({items:e,renderer:e=>{const t=b(e);E.addItem(t)}},".gallery__cards"),E.renderItems()})).catch((e=>console.error(`Error setting up card section, ${e}`))),f.getUserInfo().then((e=>{L.setUserInfo(e)})).catch((e=>console.error(`Error loading profile info. ${e}`)));const b=e=>new u({name:e.name,link:e.link,isLiked:e.isLiked,_id:e._id},"#card-template",I,w,B).getView(),L=new class{constructor(e){let{name:t,about:r,avatar:s,_id:i}=e;this._name=t,this._about=r,this._avatar=s,this.id=i}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}setUserInfo(e){let{name:t,about:r,avatar:s}=e;t&&(this._name.textContent=t),r&&(this._about.textContent=r),s&&(this._avatar.src=s)}}(e),g=new v("#profile-picture-modal",(function(e){g.renderLoading(!0),f.changeAvatar(e).then((()=>{L.setUserInfo({avatar:e.picture}),t[o.getAttribute("name")].disableBtn(),g.close()})).catch(console.error).finally((()=>{g.renderLoading(!1)}))})),y=new v("#profile-edit-modal",(function(e){y.renderLoading(!0),f.setUserInfo(e).then((()=>{L.setUserInfo(e),t[n.getAttribute("name")].disableBtn(),y.close()})).catch((e=>{console.error(`Error handling profile form submit. ${e}`)})).finally((()=>{y.renderLoading(!1)}))})),S=new v("#add-card-modal",(function(e){S.renderLoading(!0),f.addCard(e).then((e=>{const{_id:r,name:s,link:i,isLiked:n}=e,o={_id:r,name:s,link:i,isLiked:n};E.addItem(b(o)),t[a.getAttribute("name")].disableBtn(),a.reset(),S.close()})).catch((e=>{console.error(`Error: failed to add card. ${e}`)})).finally((()=>{S.renderLoading(!1)}))})),k=new class extends p{constructor(e){super(e),this._form=this._popupElement.querySelector(".modal__form"),this._confirmBtn=this._popupElement.querySelector(".modal__confirm"),this._handleDeleteConfirm=null}handleConfirm(e){this._handleDeleteConfirm=e}viewLoading(e){this._confirmBtn.textContent=e?"Deleting...":"Yes"}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),"function"==typeof this._handleDeleteConfirm&&this._handleDeleteConfirm()}))}}("#confirm-modal"),C=new class extends p{constructor(e){super(e),this._previewImage=this._popupElement.querySelector("#modal-image"),this._previewImageTitle=this._popupElement.querySelector("#modal-image-title")}open(e){let{name:t,link:r}=e;this._previewImage.alt=t,this._previewImageTitle.textContent=t,this._previewImage.src=r,super.open()}}("#image-modal");var q;function I(e){C.open({name:e._name,link:e._link})}function B(e){f.setCardLiked(e.id,e.getLikedStatus()).then((t=>{e.handleIsLiked(t.isLiked)})).catch(console.error)}function w(e){k.open(),k.handleConfirm((()=>{k.viewLoading(!0),f.removeCard(e.id).then((()=>{e.removeCard(),k.close()})).catch((e=>{console.error(`Failed to delete card. ${e}`)})).finally((()=>k.viewLoading(!1)))}))}C.setEventListeners(),y.setEventListeners(),S.setEventListeners(),g.setEventListeners(),k.setEventListeners(),q={inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:".modal__form"},Array.from(document.querySelectorAll(q.formSelector)).forEach((e=>{const r=new _(q,e),s=e.getAttribute("name");t[s]=r,r.enableValidation()})),c.addEventListener("click",(()=>{t[o.getAttribute("name")].resetValidation(),h.value=L.getUserInfo().avatar,g.open()})),l.addEventListener("click",(()=>{t[n.getAttribute("name")].resetValidation();const{name:e,about:r}=L.getUserInfo();y.setInputValues({name:e,about:r}),y.open()})),d.addEventListener("click",(()=>{S.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwd2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cHdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY2FyZERhdGEgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8gZXhwb3J0IGNvbnN0IGNhcmRTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkc1wiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY2FyZFNlY3Rpb246IFwiLmdhbGxlcnlfX2NhcmRzXCIsXHJcbiAgaW5mb1NlY3Rpb246IFwiLnByb2ZpbGVcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5mbyA9IHtcclxuICBuYW1lOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIiksXHJcbiAgYWJvdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIiksXHJcbiAgYXZhdGFyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1pbWFnZVwiKSxcclxuICBfaWQ6IFwiMjAzZWY1YjI5Yjg0OTFjODkxMWNmMjIwXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZVwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmVfZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IGNhcmRBZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVQaWN0dXJlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtcGljdHVyZS1tb2RhbFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkRm9ybSA9IGNhcmRBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBpY3R1cmVGb3JtID1cclxuICBwcm9maWxlUGljdHVyZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPVxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZGVzY3JpcHRpb25cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkTGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1saW5rXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbWFnZS10aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHBpY3R1cmVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhci1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBwaWN0dXJlTGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1waWN0dXJlXCIpO1xyXG5leHBvcnQgY29uc3QgcGljdHVyZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItaW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkTGlrZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkRGVsZXRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpcm1Nb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NvbmZpcm1cIik7XHJcbiIsImltcG9ydCBQb3B1cHdpdGhGb3JtIGZyb20gXCIuL1BvcHVwd2l0aEZvcm1cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBpc0xpa2VkLCBfaWQgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVCdG4sXHJcbiAgICBoYW5kbGVMaWtlQnRuXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLmlkID0gX2lkO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVCdG4gPSBoYW5kbGVEZWxldGVCdG47XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQnRuID0gaGFuZGxlTGlrZUJ0bjtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnRuKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdG4odGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pZDtcclxuICB9XHJcblxyXG4gIGdldExpa2VkU3RhdHVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVJc0xpa2VkKGlzTGlrZWQpIHtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgdGhpcy5fcmVuZGVyaXNMaWtlZCgpO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlcmlzTGlrZWQoKSB7XHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9yZW5kZXJpc0xpa2VkKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ0bigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVCdG4oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdG4odGhpcy5fc3VibWl0QnRuLCB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZW5hYmxlQnRuKHRoaXMuX3N1Ym1pdEJ0biwgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ0biA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19leGl0XCIpO1xyXG4gICAgdGhpcy5fbW9kYWxCYWNrZ3JvdW5kID1cclxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2JhY2tncm91bmRcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY2FwZUNsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9tb2RhbEJhY2tncm91bmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXB3aXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmVcIik7XHJcbiAgICB0aGlzLl9pbnB1dHNBcnIgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIikpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRzQXJyLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0c0Fyci5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdG5UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy8gSU1QT1JUUyAvL1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBzZWxlY3RvcnMsXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIGNhcmRBZGRCdG4sXHJcbiAgcHJvZmlsZUluZm8sXHJcbiAgcHJvZmlsZUVkaXRGb3JtLFxyXG4gIGNhcmRBZGRGb3JtLFxyXG4gIHByb2ZpbGVQaWN0dXJlRm9ybSxcclxuICBwcm9maWxlTmFtZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIHBpY3R1cmVFZGl0QnRuLFxyXG4gIHBpY3R1cmVMaW5rSW5wdXQsXHJcbiAgcGljdHVyZUVsLFxyXG4gIGZvcm1WYWxpZGF0b3JzLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwd2l0aEltYWdlXCI7XHJcbmltcG9ydCBQb3B1cHdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwd2l0aEZvcm1cIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybVwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcclxuXHJcbmxldCBjYXJkU2VjdGlvbjtcclxuXHJcbi8vIEFQSSAvL1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI0MGFkZmU0ZS1jMGU0LTQwYTEtOTUwNi1iNTU1ZGI4OTNmNzJcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGNhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGluaXRpYWxDYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGluaXRpYWxDYXJkKTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBcIi5nYWxsZXJ5X19jYXJkc1wiXHJcbiAgICApO1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGBFcnJvciBzZXR0aW5nIHVwIGNhcmQgc2VjdGlvbiwgJHtlcnJ9YCkpO1xyXG5cclxuYXBpXHJcbiAgLmdldFVzZXJJbmZvKClcclxuICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgcHJvZmlsZUluZm9DbGFzcy5zZXRVc2VySW5mbyhkYXRhKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGBFcnJvciBsb2FkaW5nIHByb2ZpbGUgaW5mby4gJHtlcnJ9YCkpO1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcclxuICAgICAgbGluazogY2FyZERhdGEubGluayxcclxuICAgICAgaXNMaWtlZDogY2FyZERhdGEuaXNMaWtlZCxcclxuICAgICAgX2lkOiBjYXJkRGF0YS5faWQsXHJcbiAgICB9LFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUJ0bixcclxuICAgIGhhbmRsZUxpa2VCdG5cclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufTtcclxuXHJcbi8vIENMQVNTRVMgLy9cclxuXHJcbmNvbnN0IHByb2ZpbGVJbmZvQ2xhc3MgPSBuZXcgVXNlckluZm8ocHJvZmlsZUluZm8pO1xyXG5cclxuY29uc3QgcGljdHVyZUZvcm1DbGFzcyA9IG5ldyBQb3B1cHdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtcGljdHVyZS1tb2RhbFwiLFxyXG4gIGhhbmRsZVBpY3R1cmVTdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtQ2xhc3MgPSBuZXcgUG9wdXB3aXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgY2FyZEFkZEZvcm1DbGFzcyA9IG5ldyBQb3B1cHdpdGhGb3JtKFxyXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXHJcbiAgaGFuZGxlQ2FyZEFkZFN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgY29uZmlybUZvcm1DbGFzcyA9IG5ldyBQb3B1cFdpdGhDb25maXJtKFwiI2NvbmZpcm0tbW9kYWxcIik7XHJcblxyXG5jb25zdCBjYXJkUHJldmlld0NsYXNzID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIpO1xyXG5cclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG5cclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vLyBJTlRJVElBTElaRSAvL1xyXG5jYXJkUHJldmlld0NsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVGb3JtQ2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY2FyZEFkZEZvcm1DbGFzcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5waWN0dXJlRm9ybUNsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbmZpcm1Gb3JtQ2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvblNldHRpbmdzKTtcclxuXHJcbi8vIEZVTkNUSU9OUyAvL1xyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmQpIHtcclxuICBjYXJkUHJldmlld0NsYXNzLm9wZW4oeyBuYW1lOiBjYXJkLl9uYW1lLCBsaW5rOiBjYXJkLl9saW5rIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQWRkU3VibWl0KGlucHV0RGF0YSkge1xyXG4gIGNhcmRBZGRGb3JtQ2xhc3MucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5hZGRDYXJkKGlucHV0RGF0YSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgX2lkLCBuYW1lLCBsaW5rLCBpc0xpa2VkIH0gPSBkYXRhO1xyXG4gICAgICBjb25zdCBuZXdDYXJkRGF0YSA9IHsgX2lkLCBuYW1lLCBsaW5rLCBpc0xpa2VkIH07XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChuZXdDYXJkRGF0YSkpO1xyXG4gICAgICBmb3JtVmFsaWRhdG9yc1tjYXJkQWRkRm9ybS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpXS5kaXNhYmxlQnRuKCk7XHJcbiAgICAgIGNhcmRBZGRGb3JtLnJlc2V0KCk7XHJcbiAgICAgIGNhcmRBZGRGb3JtQ2xhc3MuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvcjogZmFpbGVkIHRvIGFkZCBjYXJkLiAke2Vycn1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGNhcmRBZGRGb3JtQ2xhc3MucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIHByb2ZpbGVGb3JtQ2xhc3MucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5zZXRVc2VySW5mbyhkYXRhKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBwcm9maWxlSW5mb0NsYXNzLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgICBmb3JtVmFsaWRhdG9yc1twcm9maWxlRWRpdEZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0uZGlzYWJsZUJ0bigpO1xyXG4gICAgICBwcm9maWxlRm9ybUNsYXNzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaGFuZGxpbmcgcHJvZmlsZSBmb3JtIHN1Ym1pdC4gJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlRm9ybUNsYXNzLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBpY3R1cmVTdWJtaXQoYXZhdGFyVXJsKSB7XHJcbiAgcGljdHVyZUZvcm1DbGFzcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmNoYW5nZUF2YXRhcihhdmF0YXJVcmwpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVJbmZvQ2xhc3Muc2V0VXNlckluZm8oeyBhdmF0YXI6IGF2YXRhclVybC5waWN0dXJlIH0pO1xyXG4gICAgICBmb3JtVmFsaWRhdG9yc1twcm9maWxlUGljdHVyZUZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0uZGlzYWJsZUJ0bigpO1xyXG4gICAgICBwaWN0dXJlRm9ybUNsYXNzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBpY3R1cmVGb3JtQ2xhc3MucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUJ0bihjYXJkKSB7XHJcbiAgYXBpXHJcbiAgICAuc2V0Q2FyZExpa2VkKGNhcmQuaWQsIGNhcmQuZ2V0TGlrZWRTdGF0dXMoKSlcclxuICAgIC50aGVuKCh1cGRhdGVkQ2FyZCkgPT4ge1xyXG4gICAgICBjYXJkLmhhbmRsZUlzTGlrZWQodXBkYXRlZENhcmQuaXNMaWtlZCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVCdG4oY2FyZCkge1xyXG4gIGNvbmZpcm1Gb3JtQ2xhc3Mub3BlbigpO1xyXG4gIGNvbmZpcm1Gb3JtQ2xhc3MuaGFuZGxlQ29uZmlybSgoKSA9PiB7XHJcbiAgICBjb25maXJtRm9ybUNsYXNzLnZpZXdMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5yZW1vdmVDYXJkKGNhcmQuaWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLnJlbW92ZUNhcmQoKTtcclxuICAgICAgICBjb25maXJtRm9ybUNsYXNzLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBjYXJkLiAke2Vycn1gKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4gY29uZmlybUZvcm1DbGFzcy52aWV3TG9hZGluZyhmYWxzZSkpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBMSVNURU5FUlMgLy9cclxucGljdHVyZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1twcm9maWxlUGljdHVyZUZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcGljdHVyZUxpbmtJbnB1dC52YWx1ZSA9IHByb2ZpbGVJbmZvQ2xhc3MuZ2V0VXNlckluZm8oKS5hdmF0YXI7XHJcbiAgcGljdHVyZUZvcm1DbGFzcy5vcGVuKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1twcm9maWxlRWRpdEZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gcHJvZmlsZUluZm9DbGFzcy5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVGb3JtQ2xhc3Muc2V0SW5wdXRWYWx1ZXMoeyBuYW1lLCBhYm91dCB9KTtcclxuICBwcm9maWxlRm9ybUNsYXNzLm9wZW4oKTtcclxufSk7XHJcblxyXG5jYXJkQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2FyZEFkZEZvcm1DbGFzcy5vcGVuKCk7XHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgdGhpcy5fYXV0aG9yaXphdGlvbiA9IGhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICAgIHRoaXMuX2NvbnRlbnRUeXBlID0gaGVhZGVycy5jb250ZW50VHlwZTtcclxuICB9XHJcblxyXG4gIC8vIEdFTkVSQUwgUFJPTUlTRVMgLy9cclxuICBfaGFuZGxlU2VydmVyUmVzcG9uc2UocmVzKSB7XHJcbiAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgX3JlcXVlc3QodXJsLCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEFwcEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ0FSRFMgLy9cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRDYXJkTGlrZWQoY2FyZElkLCBpc0xpa2VkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBVU0VSIElORk8gLy9cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIsIF9pZCB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGFib3V0LFxyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgICBfaWQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VBdmF0YXIoYXZhdGFyVXJsKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJVcmwucGljdHVyZSxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgYWJvdXQsIGF2YXRhciwgX2lkIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fYWJvdXQgPSBhYm91dDtcclxuICAgIHRoaXMuX2F2YXRhciA9IGF2YXRhcjtcclxuICAgIHRoaXMuaWQgPSBfaWQ7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XHJcbiAgICBpZiAobmFtZSkgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBpZiAoYWJvdXQpIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICBpZiAoYXZhdGFyKSB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9jb25maXJtQnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NvbmZpcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNvbmZpcm0oaGFuZGxlRGVsZXRlQ29uZmlybSkge1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybSA9IGhhbmRsZURlbGV0ZUNvbmZpcm07XHJcbiAgfVxyXG5cclxuICB2aWV3TG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fY29uZmlybUJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NvbmZpcm1CdG4udGV4dENvbnRlbnQgPSBcIlllc1wiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlXCIpO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlVGl0bGUgPVxyXG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbWFnZS10aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLnNyYyA9IGxpbms7XHJcblxyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsicHJvZmlsZUluZm8iLCJuYW1lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWJvdXQiLCJhdmF0YXIiLCJfaWQiLCJmb3JtVmFsaWRhdG9ycyIsInByb2ZpbGVFZGl0TW9kYWwiLCJjYXJkQWRkTW9kYWwiLCJwcm9maWxlUGljdHVyZU1vZGFsIiwicHJvZmlsZUVkaXRGb3JtIiwiY2FyZEFkZEZvcm0iLCJwcm9maWxlUGljdHVyZUZvcm0iLCJwcm9maWxlRWRpdEJ0biIsImNhcmRBZGRCdG4iLCJwaWN0dXJlRWRpdEJ0biIsInBpY3R1cmVMaW5rSW5wdXQiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUJ0biIsImhhbmRsZUxpa2VCdG4iLCJsaW5rIiwiaXNMaWtlZCIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2lzTGlrZWQiLCJpZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVCdG4iLCJfaGFuZGxlTGlrZUJ0biIsIl9jYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZExpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmREZWxldGVCdG4iLCJfY2FyZEltYWdlRWwiLCJyZW1vdmVDYXJkIiwicmVtb3ZlIiwiZ2V0Q2FyZElkIiwiZ2V0TGlrZWRTdGF0dXMiLCJoYW5kbGVJc0xpa2VkIiwiX3JlbmRlcmlzTGlrZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJnZXRWaWV3IiwiX2NhcmRUaXRsZUVsIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRFbHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGlzYWJsZUJ0biIsIl9zdWJtaXRCdG4iLCJkaXNhYmxlZCIsIl9lbmFibGVCdG4iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJpbnB1dEVsZW1lbnQiLCJyZXNldCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJyZXZlcnNlIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdG4iLCJfbW9kYWxCYWNrZ3JvdW5kIiwib3BlbiIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXB3aXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfaW5wdXRzQXJyIiwiX3N1Ym1pdEJ0blRleHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjYXJkU2VjdGlvbiIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9hdXRob3JpemF0aW9uIiwiYXV0aG9yaXphdGlvbiIsIl9jb250ZW50VHlwZSIsImNvbnRlbnRUeXBlIiwiX2hhbmRsZVNlcnZlclJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIl9yZXF1ZXN0IiwidXJsIiwib3B0aW9ucyIsImZldGNoIiwidGhlbiIsImdldEFwcEluZm8iLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mbyIsImFkZENhcmQiLCJfcmVmMiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwic2V0Q2FyZExpa2VkIiwic2V0VXNlckluZm8iLCJfcmVmMyIsImNoYW5nZUF2YXRhciIsImF2YXRhclVybCIsInBpY3R1cmUiLCJjYXJkcyIsImNhcmREYXRhIiwiaW5pdGlhbENhcmQiLCJjcmVhdGVDYXJkIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJwcm9maWxlSW5mb0NsYXNzIiwiX2Fib3V0IiwiX2F2YXRhciIsInBpY3R1cmVGb3JtQ2xhc3MiLCJnZXRBdHRyaWJ1dGUiLCJmaW5hbGx5IiwicHJvZmlsZUZvcm1DbGFzcyIsImNhcmRBZGRGb3JtQ2xhc3MiLCJpbnB1dERhdGEiLCJuZXdDYXJkRGF0YSIsImNvbmZpcm1Gb3JtQ2xhc3MiLCJfY29uZmlybUJ0biIsIl9oYW5kbGVEZWxldGVDb25maXJtIiwiaGFuZGxlQ29uZmlybSIsImhhbmRsZURlbGV0ZUNvbmZpcm0iLCJ2aWV3TG9hZGluZyIsImNhcmRQcmV2aWV3Q2xhc3MiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdJbWFnZVRpdGxlIiwiY2FyZCIsInVwZGF0ZWRDYXJkIiwiZm9ybVNlbGVjdG9yIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiXSwic291cmNlUm9vdCI6IiJ9