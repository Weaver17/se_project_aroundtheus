!function(){"use strict";const e={name:document.querySelector(".profile__name"),about:document.querySelector(".profile__description"),avatar:document.querySelector(".profile__avatar-image"),_id:"203ef5b29b8491c8911cf220"},t={inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=document.querySelector("#profile-edit-modal"),s=document.querySelector("#add-card-modal"),i=document.querySelector("#profile-picture-modal"),n=r.querySelector(".modal__form"),a=s.querySelector(".modal__form"),o=i.querySelector(".modal__form"),l=document.querySelector("#profile-edit-button"),d=document.querySelector("#add-card-button"),c=s.querySelector("#card-form"),h=document.querySelector("#modal-name"),_=document.querySelector("#modal-description"),u=(document.querySelector("#modal-title"),document.querySelector("#modal-link"),document.querySelector("#modal-image"),document.querySelector("#modal-image-title"),document.querySelector("#profile-avatar-button")),m=document.querySelector("#modal-picture"),p=document.querySelector(".profile__avatar-image");document.querySelector(".card__like-button"),document.querySelector(".card__delete-button"),document.querySelector(".modal__confirm");class v{constructor(e,t,r,s,i){let{name:n,link:a,isLiked:o,_id:l}=e;this._name=n,this._link=a,this._isLiked=o,this.id=l,this._cardSelector=t,this._handleImageClick=r,this._handleDeleteBtn=s,this._handleLikeBtn=i,this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeBtn(this)})),this._cardDeleteBtn.addEventListener("click",(()=>{this._handleDeleteBtn(this)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}removeCard(){this._cardElement.remove()}getCardId(){return this.id}getLikedStatus(){return this._isLiked}handleIsLiked(e){this._isLiked=e,this._renderisLiked()}_renderisLiked(){this._isLiked?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}getView(){return this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteBtn=this._cardElement.querySelector(".card__delete-button"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._renderisLiked(),this._cardElement}}class E{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputEls=Array.from(this._formElement.querySelectorAll(this._inputSelector))}disableBtn(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}_enableBtn(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableBtn(this._submitBtn,this._inactiveButtonClass):this._enableBtn(this._submitBtn,this._inactiveButtonClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._submitBtn=this._formElement.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this.disableBtn()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState(),this._formElement.reset()}}class f{constructor(e,t){let{items:r,renderer:s}=e;this._items=r,this._renderer=s,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class b{constructor(e){this._popupElement=document.querySelector(e),this._closeBtn=this._popupElement.querySelector(".modal__exit"),this._modalBackground=this._popupElement.querySelector(".modal__background")}open(){document.addEventListener("keydown",this._handleEscapeClose),this._popupElement.classList.add("modal_opened")}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeBtn.addEventListener("click",(()=>{this.close()})),this._modalBackground.addEventListener("click",(()=>{this.close()}))}}class L extends b{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".modal__form"),this._submitBtn=this._popupElement.querySelector(".modal__save"),this._inputsArr=Array.from(this._form.querySelectorAll(".modal__input"))}_getInputValues(){const e={};return this._inputsArr.forEach((t=>{e[t.name]=t.value})),e}isLoading(e){this._submitBtn.textContent=e?"Saving...":"Save"}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}let S;const y=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r,this._authorization=r.authorization,this._contentType=r.contentType}_handleServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleServerResponse).catch((e=>console.error(`Api error getting cards, ${e}`)))}addCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then(this._handleServerResponse).catch((e=>console.error(e)))}removeCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleServerResponse).catch((e=>console.error(e)))}setCardLiked(e,t){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers}).then(this._handleServerResponse).catch((e=>console.error(e)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._handleServerResponse).catch((e=>console.error(e)))}setUserInfo(e,t,r,s){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t,avatar:r,_id:s})}).then(this._handleServerResponse).catch((e=>console.error(`Error setting api user info. ${e}`)))}changeAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.picture})}).then(this._checkResponse).catch((e=>console.error(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"40adfe4e-c0e4-40a1-9506-b555db893f72","Content-Type":"application/json"}});y.getInitialCards().then((e=>{S=new f({items:e,renderer:e=>{const t=g(e);S.addItem(t)}},".gallery__cards"),S.renderItems()})).catch((e=>console.error(`Error setting up card section, ${e}`))),y.getUserInfo().then((e=>{k.setUserInfo({name:e.name,about:e.about,avatar:e.avatar})})).catch((e=>console.error(`Error loading profile info. ${e}`)));const g=e=>new v({name:e.name,link:e.link,isLiked:e.isLiked,_id:e._id},"#card-template",D,T,V).getView(),k=new class{constructor(e){let{name:t,about:r,avatar:s,_id:i}=e;this._name=t,this._about=r,this._avatar=s,this.id=i}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}setUserInfo(e){let{name:t,about:r,avatar:s}=e;t&&(this._name.textContent=t),r&&(this._about.textContent=r),s&&(this._avatar.src=s)}}(e),C=new L("#profile-picture-modal",(function(e){C.isLoading(!0),y.changeAvatar(e).then((()=>{k.setUserInfo({avatar:e.picture}),x.disableBtn(),C.close()})).catch((e=>{console.error(e)})).finally((()=>{C.isLoading(!1)}))})),B=new L("#profile-edit-modal",(function(e){B.isLoading(!0),y.setUserInfo({name:e.name,about:e.about}).then((()=>{k.setUserInfo({name:e.name,about:e.about}),U.disableBtn(),B.close()})).catch((e=>{console.error(e)})).finally((()=>{B.isLoading(!1)}))})),I=new L("#add-card-modal",(function(e){I.isLoading(!0),y.addCard(e).then((e=>{const{_id:t,name:r,link:s,isLiked:i}=e,n={_id:t,name:r,link:s,isLiked:i};S.addItem(g(n)),$.disableBtn(),c.reset(),I.close()})).catch((e=>{console.error(`Error: failed to add card. ${e}`)})).finally((()=>{I.isLoading(!1)}))})),q=new class extends b{constructor(e){super(e),this._form=this._popupElement.querySelector(".modal__form"),this._confirmBtn=this._popupElement.querySelector(".modal__confirm"),this._handleDeleteConfirm=null}handleConfirm(e){this._handleDeleteConfirm=e}viewLoading(e){this._confirmBtn.textContent=e?"Deleting...":"Yes"}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),"function"==typeof this._handleDeleteConfirm&&this._handleDeleteConfirm()}))}}("#confirm-modal"),w=new class extends b{constructor(e){super(e),this._previewImage=this._popupElement.querySelector("#modal-image"),this._previewImageTitle=this._popupElement.querySelector("#modal-image-title")}open(e){let{name:t,link:r}=e;this._previewImage.alt=t,this._previewImageTitle.textContent=t,this._previewImage.src=r,super.open()}}("#image-modal"),U=new E(t,n),$=new E(t,a),x=new E(t,o);function D(e){w.open({name:e._name,link:e._link})}function V(e){y.setCardLiked(e.id,e.getLikedStatus()).then((t=>{e.handleIsLiked(t.isLiked)})).catch((e=>{console.error(e)}))}function T(e){q.open(),q.handleConfirm((()=>{q.viewLoading(!0),y.removeCard(e.id).then((()=>{e.removeCard(),q.viewLoading(!1),q.close()})).catch((e=>{console.error(`Failed to delete card. ${e}`),q.viewLoading(!1)}))}))}w.setEventListeners(),B.setEventListeners(),I.setEventListeners(),C.setEventListeners(),q.setEventListeners(),U.enableValidation(),$.enableValidation(),x.enableValidation(),u.addEventListener("click",(()=>{x.resetValidation(),m.value=p.src,C.open()})),l.addEventListener("click",(()=>{U.resetValidation();const{name:e,about:t}=k.getUserInfo();h.value=e,_.value=t,B.open()})),d.addEventListener("click",(()=>{$.resetValidation(),I.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNLElBR3pCbEcsRUFBVzhCLGlCQUFpQixTQUFTLEtBQ25DNkksRUFBaUI3RixrQkFDakIwRixFQUFpQnRFLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXB3aXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwd2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjYXJkRGF0YSA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyBleHBvcnQgY29uc3QgY2FyZFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmRzXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkU2VjdGlvbjogXCIuZ2FsbGVyeV9fY2FyZHNcIixcclxuICBpbmZvU2VjdGlvbjogXCIucHJvZmlsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbmZvID0ge1xyXG4gIG5hbWU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKSxcclxuICBhYm91dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKSxcclxuICBhdmF0YXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWltYWdlXCIpLFxyXG4gIF9pZDogXCIyMDNlZjViMjliODQ5MWM4OTExY2YyMjBcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZV9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgY2FyZEFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZVBpY3R1cmVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1waWN0dXJlLW1vZGFsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRGb3JtRWwgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRGb3JtRWwgPSBjYXJkQWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IHBpY3R1cmVGb3JtRWwgPSBwcm9maWxlUGljdHVyZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkRm9ybSA9IGNhcmRBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLW5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1kZXNjcmlwdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC10aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWxpbmtcIik7XHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlLXRpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgcGljdHVyZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHBpY3R1cmVMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXBpY3R1cmVcIik7XHJcbmV4cG9ydCBjb25zdCBwaWN0dXJlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaWtlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmREZWxldGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlybU1vZGFsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY29uZmlybVwiKTtcclxuIiwiaW1wb3J0IFBvcHVwd2l0aEZvcm0gZnJvbSBcIi4vUG9wdXB3aXRoRm9ybVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIGlzTGlrZWQsIF9pZCB9LFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUJ0bixcclxuICAgIGhhbmRsZUxpa2VCdG5cclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuaWQgPSBfaWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ0biA9IGhhbmRsZURlbGV0ZUJ0bjtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VCdG4gPSBoYW5kbGVMaWtlQnRuO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdG4odGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ0bih0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIGdldENhcmRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLmlkO1xyXG4gIH1cclxuXHJcbiAgZ2V0TGlrZWRTdGF0dXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNMaWtlZDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUlzTGlrZWQoaXNMaWtlZCkge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9yZW5kZXJpc0xpa2VkKCk7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVyaXNMaWtlZCgpIHtcclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID1cclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3JlbmRlcmlzTGlrZWQoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnRuKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ0bigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbHMpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUJ0bih0aGlzLl9zdWJtaXRCdG4sIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9lbmFibGVCdG4odGhpcy5fc3VibWl0QnRuLCB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLmRpc2FibGVCdG4oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2V4aXRcIik7XHJcbiAgICB0aGlzLl9tb2RhbEJhY2tncm91bmQgPVxyXG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYmFja2dyb3VuZFwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjYXBlQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX21vZGFsQmFja2dyb3VuZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cHdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZVwiKTtcclxuICAgIHRoaXMuX2lucHV0c0FyciA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKSk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG5cclxuICAgIHRoaXMuX2lucHV0c0Fyci5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBpc0xvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIElNUE9SVFMgLy9cclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgY2FyZERhdGEsXHJcbiAgc2VsZWN0b3JzLFxyXG4gIGVkaXRGb3JtRWwsXHJcbiAgYWRkRm9ybUVsLFxyXG4gIHBpY3R1cmVGb3JtRWwsXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIGNhcmRBZGRCdG4sXHJcbiAgcHJvZmlsZUluZm8sXHJcbiAgY2FyZEFkZEZvcm0sXHJcbiAgcHJvZmlsZU5hbWVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxuICBwaWN0dXJlRWRpdEJ0bixcclxuICBwaWN0dXJlTGlua0lucHV0LFxyXG4gIHBpY3R1cmVFbCxcclxuICBjYXJkTGlrZUJ0bixcclxuICBjYXJkRGVsZXRlQnRuLFxyXG4gIGNvbmZpcm1Nb2RhbEJ0bixcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmRcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvclwiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cHdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgUG9wdXB3aXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cHdpdGhGb3JtXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCI7XHJcblxyXG5sZXQgY2FyZFNlY3Rpb247XHJcblxyXG4vLyBBUEkgLy9cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiNDBhZGZlNGUtYzBlNC00MGExLTk1MDYtYjU1NWRiODkzZjcyXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChjYXJkcykgPT4ge1xyXG4gICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcclxuICAgICAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBpbml0aWFsQ2FyZCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShpbml0aWFsQ2FyZCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCIuZ2FsbGVyeV9fY2FyZHNcIlxyXG4gICAgKTtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgRXJyb3Igc2V0dGluZyB1cCBjYXJkIHNlY3Rpb24sICR7ZXJyfWApKTtcclxuXHJcbmFwaVxyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgIHByb2ZpbGVJbmZvQ2xhc3Muc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxyXG4gICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgfSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgRXJyb3IgbG9hZGluZyBwcm9maWxlIGluZm8uICR7ZXJyfWApKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoY2FyZERhdGEpID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IGNhcmREYXRhLm5hbWUsXHJcbiAgICAgIGxpbms6IGNhcmREYXRhLmxpbmssXHJcbiAgICAgIGlzTGlrZWQ6IGNhcmREYXRhLmlzTGlrZWQsXHJcbiAgICAgIF9pZDogY2FyZERhdGEuX2lkLFxyXG4gICAgfSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVCdG4sXHJcbiAgICBoYW5kbGVMaWtlQnRuXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbn07XHJcblxyXG4vLyBDTEFTU0VTIC8vXHJcblxyXG5jb25zdCBwcm9maWxlSW5mb0NsYXNzID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVJbmZvKTtcclxuXHJcbmNvbnN0IHBpY3R1cmVGb3JtQ2xhc3MgPSBuZXcgUG9wdXB3aXRoRm9ybShcclxuICBcIiNwcm9maWxlLXBpY3R1cmUtbW9kYWxcIixcclxuICBoYW5kbGVQaWN0dXJlU3VibWl0XHJcbik7XHJcblxyXG5jb25zdCBwcm9maWxlRm9ybUNsYXNzID0gbmV3IFBvcHVwd2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IGNhcmRBZGRGb3JtQ2xhc3MgPSBuZXcgUG9wdXB3aXRoRm9ybShcclxuICBcIiNhZGQtY2FyZC1tb2RhbFwiLFxyXG4gIGhhbmRsZUNhcmRBZGRTdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IGNvbmZpcm1Gb3JtQ2xhc3MgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShcIiNjb25maXJtLW1vZGFsXCIpO1xyXG5cclxuY29uc3QgY2FyZFByZXZpZXdDbGFzcyA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1tb2RhbFwiKTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBlZGl0Rm9ybUVsKTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkRm9ybUVsKTtcclxuY29uc3QgcGljdHVyZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgcGljdHVyZUZvcm1FbFxyXG4pO1xyXG5cclxuLy8gSU5USVRJQUxJWkUgLy9cclxuY2FyZFByZXZpZXdDbGFzcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wcm9maWxlRm9ybUNsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNhcmRBZGRGb3JtQ2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucGljdHVyZUZvcm1DbGFzcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25maXJtRm9ybUNsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnBpY3R1cmVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vIEZVTkNUSU9OUyAvL1xyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmQpIHtcclxuICBjYXJkUHJldmlld0NsYXNzLm9wZW4oeyBuYW1lOiBjYXJkLl9uYW1lLCBsaW5rOiBjYXJkLl9saW5rIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQWRkU3VibWl0KGlucHV0RGF0YSkge1xyXG4gIGNhcmRBZGRGb3JtQ2xhc3MuaXNMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQoaW5wdXREYXRhKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgY29uc3QgeyBfaWQsIG5hbWUsIGxpbmssIGlzTGlrZWQgfSA9IGRhdGE7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmREYXRhID0geyBfaWQsIG5hbWUsIGxpbmssIGlzTGlrZWQgfTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKG5ld0NhcmREYXRhKSk7XHJcbiAgICAgIGFkZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ0bigpO1xyXG4gICAgICBjYXJkQWRkRm9ybS5yZXNldCgpO1xyXG4gICAgICBjYXJkQWRkRm9ybUNsYXNzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3I6IGZhaWxlZCB0byBhZGQgY2FyZC4gJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBjYXJkQWRkRm9ybUNsYXNzLmlzTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIHByb2ZpbGVGb3JtQ2xhc3MuaXNMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnNldFVzZXJJbmZvKHsgbmFtZTogZGF0YS5uYW1lLCBhYm91dDogZGF0YS5hYm91dCB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBwcm9maWxlSW5mb0NsYXNzLnNldFVzZXJJbmZvKHsgbmFtZTogZGF0YS5uYW1lLCBhYm91dDogZGF0YS5hYm91dCB9KTtcclxuICAgICAgZWRpdEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ0bigpO1xyXG4gICAgICBwcm9maWxlRm9ybUNsYXNzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcHJvZmlsZUZvcm1DbGFzcy5pc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBpY3R1cmVTdWJtaXQoYXZhdGFyVXJsKSB7XHJcbiAgcGljdHVyZUZvcm1DbGFzcy5pc0xvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuY2hhbmdlQXZhdGFyKGF2YXRhclVybClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgcHJvZmlsZUluZm9DbGFzcy5zZXRVc2VySW5mbyh7IGF2YXRhcjogYXZhdGFyVXJsLnBpY3R1cmUgfSk7XHJcbiAgICAgIHBpY3R1cmVGb3JtVmFsaWRhdG9yLmRpc2FibGVCdG4oKTtcclxuICAgICAgcGljdHVyZUZvcm1DbGFzcy5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBpY3R1cmVGb3JtQ2xhc3MuaXNMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQnRuKGNhcmQpIHtcclxuICBhcGlcclxuICAgIC5zZXRDYXJkTGlrZWQoY2FyZC5pZCwgY2FyZC5nZXRMaWtlZFN0YXR1cygpKVxyXG4gICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgIGNhcmQuaGFuZGxlSXNMaWtlZCh1cGRhdGVkQ2FyZC5pc0xpa2VkKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQnRuKGNhcmQpIHtcclxuICBjb25maXJtRm9ybUNsYXNzLm9wZW4oKTtcclxuICBjb25maXJtRm9ybUNsYXNzLmhhbmRsZUNvbmZpcm0oKCkgPT4ge1xyXG4gICAgY29uZmlybUZvcm1DbGFzcy52aWV3TG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAucmVtb3ZlQ2FyZChjYXJkLmlkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5yZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgY29uZmlybUZvcm1DbGFzcy52aWV3TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgY29uZmlybUZvcm1DbGFzcy5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBkZWxldGUgY2FyZC4gJHtlcnJ9YCk7XHJcbiAgICAgICAgY29uZmlybUZvcm1DbGFzcy52aWV3TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBMSVNURU5FUlMgLy9cclxucGljdHVyZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwaWN0dXJlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBwaWN0dXJlTGlua0lucHV0LnZhbHVlID0gcGljdHVyZUVsLnNyYztcclxuICBwaWN0dXJlRm9ybUNsYXNzLm9wZW4oKTtcclxufSk7XHJcblxyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHByb2ZpbGVJbmZvQ2xhc3MuZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGFib3V0O1xyXG4gIHByb2ZpbGVGb3JtQ2xhc3Mub3BlbigpO1xyXG59KTtcclxuXHJcbmNhcmRBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNhcmRBZGRGb3JtQ2xhc3Mub3BlbigpO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIHRoaXMuX2F1dGhvcml6YXRpb24gPSBoZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgICB0aGlzLl9jb250ZW50VHlwZSA9IGhlYWRlcnMuY29udGVudFR5cGU7XHJcbiAgfVxyXG5cclxuICAvLyBHRU5FUkFMIFBST01JU0VTIC8vXHJcbiAgX2hhbmRsZVNlcnZlclJlc3BvbnNlKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEFwcEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ0FSRFMgLy9cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGBBcGkgZXJyb3IgZ2V0dGluZyBjYXJkcywgJHtlcnJ9YCkpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgfVxyXG5cclxuICBzZXRDYXJkTGlrZWQoY2FyZElkLCBpc0xpa2VkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuICB9XHJcblxyXG4gIC8vIFVTRVIgSU5GTyAvL1xyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQsIGF2YXRhciwgX2lkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBhYm91dCxcclxuICAgICAgICBhdmF0YXIsXHJcbiAgICAgICAgX2lkLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgRXJyb3Igc2V0dGluZyBhcGkgdXNlciBpbmZvLiAke2Vycn1gKSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VBdmF0YXIoYXZhdGFyVXJsKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogYXZhdGFyVXJsLnBpY3R1cmUsXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0LCBhdmF0YXIsIF9pZCB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2Fib3V0ID0gYWJvdXQ7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBhdmF0YXI7XHJcbiAgICB0aGlzLmlkID0gX2lkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyLnNyYyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xyXG4gICAgaWYgKG5hbWUpIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgaWYgKGFib3V0KSB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gICAgaWYgKGF2YXRhcikgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fY29uZmlybUJ0biA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb25maXJtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDb25maXJtKGhhbmRsZURlbGV0ZUNvbmZpcm0pIHtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm0gPSBoYW5kbGVEZWxldGVDb25maXJtO1xyXG4gIH1cclxuXHJcbiAgdmlld0xvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX2NvbmZpcm1CdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jb25maXJtQnRuLnRleHRDb250ZW50ID0gXCJZZXNcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZiAodHlwZW9mIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm0gPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm0oKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlID1cclxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtaW1hZ2UtdGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xyXG5cclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInByb2ZpbGVJbmZvIiwibmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFib3V0IiwiYXZhdGFyIiwiX2lkIiwidmFsaWRhdGlvblNldHRpbmdzIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwcm9maWxlRWRpdE1vZGFsIiwiY2FyZEFkZE1vZGFsIiwicHJvZmlsZVBpY3R1cmVNb2RhbCIsImVkaXRGb3JtRWwiLCJhZGRGb3JtRWwiLCJwaWN0dXJlRm9ybUVsIiwicHJvZmlsZUVkaXRCdG4iLCJjYXJkQWRkQnRuIiwiY2FyZEFkZEZvcm0iLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwaWN0dXJlRWRpdEJ0biIsInBpY3R1cmVMaW5rSW5wdXQiLCJwaWN0dXJlRWwiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUJ0biIsImhhbmRsZUxpa2VCdG4iLCJsaW5rIiwiaXNMaWtlZCIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2lzTGlrZWQiLCJpZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVCdG4iLCJfaGFuZGxlTGlrZUJ0biIsIl9jYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZExpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmREZWxldGVCdG4iLCJfY2FyZEltYWdlRWwiLCJyZW1vdmVDYXJkIiwicmVtb3ZlIiwiZ2V0Q2FyZElkIiwiZ2V0TGlrZWRTdGF0dXMiLCJoYW5kbGVJc0xpa2VkIiwiX3JlbmRlcmlzTGlrZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJnZXRWaWV3IiwiX2NhcmRUaXRsZUVsIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0RWxzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImRpc2FibGVCdG4iLCJfc3VibWl0QnRuIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnRuIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiaW5wdXRFbGVtZW50IiwicmVzZXQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdG4iLCJfbW9kYWxCYWNrZ3JvdW5kIiwib3BlbiIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXB3aXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfaW5wdXRzQXJyIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiaXNMb2FkaW5nIiwiY2FyZFNlY3Rpb24iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfYXV0aG9yaXphdGlvbiIsImF1dGhvcml6YXRpb24iLCJfY29udGVudFR5cGUiLCJjb250ZW50VHlwZSIsIl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRBcHBJbmZvIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsInRoZW4iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImFkZENhcmQiLCJfcmVmMiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwic2V0Q2FyZExpa2VkIiwic2V0VXNlckluZm8iLCJjaGFuZ2VBdmF0YXIiLCJhdmF0YXJVcmwiLCJwaWN0dXJlIiwiX2NoZWNrUmVzcG9uc2UiLCJjYXJkcyIsImNhcmREYXRhIiwiaW5pdGlhbENhcmQiLCJjcmVhdGVDYXJkIiwiZGF0YSIsInByb2ZpbGVJbmZvQ2xhc3MiLCJfYWJvdXQiLCJfYXZhdGFyIiwicGljdHVyZUZvcm1DbGFzcyIsInBpY3R1cmVGb3JtVmFsaWRhdG9yIiwiZmluYWxseSIsInByb2ZpbGVGb3JtQ2xhc3MiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImNhcmRBZGRGb3JtQ2xhc3MiLCJpbnB1dERhdGEiLCJuZXdDYXJkRGF0YSIsImFkZEZvcm1WYWxpZGF0b3IiLCJjb25maXJtRm9ybUNsYXNzIiwiX2NvbmZpcm1CdG4iLCJfaGFuZGxlRGVsZXRlQ29uZmlybSIsImhhbmRsZUNvbmZpcm0iLCJoYW5kbGVEZWxldGVDb25maXJtIiwidmlld0xvYWRpbmciLCJjYXJkUHJldmlld0NsYXNzIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3SW1hZ2VUaXRsZSIsImNhcmQiLCJ1cGRhdGVkQ2FyZCJdLCJzb3VyY2VSb290IjoiIn0=