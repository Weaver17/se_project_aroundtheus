!function(){"use strict";const e=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],t={name:document.querySelector(".profile__name"),description:document.querySelector(".profile__description")},s={inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},n=document.querySelector("#profile-edit-modal"),i=document.querySelector("#add-card-modal"),r=n.querySelector(".modal__form"),o=i.querySelector(".modal__form"),a=document.querySelector("#profile-edit-button"),l=document.querySelector("#add-card-button"),c=i.querySelector("#card-form"),d=document.querySelector("#modal-name"),m=document.querySelector("#modal-description");document.querySelector("#modal-title"),document.querySelector("#modal-link"),document.querySelector("#modal-image"),document.querySelector("#modal-image-title");class u{constructor(e){let{name:t,link:s,cardSelector:n,handleImageClick:i}=e;this._name=t,this._link=s,this._cardSelector=n,this._handleImageClick=i,this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardLikeButton.addEventListener("click",this._handleLikeBtn),this._cardDeleteBtn.addEventListener("click",this._handleDeleteBtn),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleLikeBtn=()=>{this._cardLikeButton.classList.toggle("card__like-button_active")};_handleDeleteBtn=()=>{this._cardElement.remove(),this._cardElement=null};getView(){return this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteBtn=this._cardElement.querySelector(".card__delete-button"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._cardElement}}class _{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}disableBtn(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}_enableBtn(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableBtn(this._submitBtn,this._inactiveButtonClass):this._enableBtn(this._submitBtn,this._inactiveButtonClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._inputEls=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitBtn=this._formElement.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this.disableBtn()})),this._setEventListeners()}}class h{constructor(e){this._popupElement=document.querySelector(e),this._closeBtn=this._popupElement.querySelector(".modal__exit"),this._modalBackground=this._popupElement.querySelector(".modal__background")}open(){document.addEventListener("keydown",this._handleEscapeClose),this._popupElement.classList.add("modal_opened")}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeBtn.addEventListener("click",(()=>{this.close()})),this._modalBackground.addEventListener("click",(()=>{this.close()}))}}class p extends h{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".modal__form"),this._submitBtn=this._popupElement.querySelector(".modal__save")}_getInputValues(){const e=Array.from(this._form.querySelectorAll(".modal__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}const E=new class{constructor(e){let{name:t,description:s}=e;this._name=t,this._job=s}getUserInfo(){return{name:this._name.textContent,description:this._job.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._name.textContent=t,this._job.textContent=s}}(t),v=new p("#profile-edit-modal",(function(e){E.setUserInfo(e),v.close()})),g=new p("#add-card-modal",(function(e){L({name:e.title,link:e.link}),g.close(),c.reset()})),S=new class extends h{constructor(e){super(e),this._previewImage=this._popupElement.querySelector("#modal-image"),this._previewImageTitle=this._popupElement.querySelector("#modal-image-title")}open(e){let{name:t,link:s}=e;this._previewImage.alt=t,this._previewImageTitle.textContent=t,this._previewImage.src=s,super.open()}}("#image-modal"),y=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:e,renderer:L},".gallery__cards"),k=new _(s,r),B=new _(s,o);function f(e){S.open({name:e._name,link:e._link})}function L(e){const t=new u({name:e.name,link:e.link,cardSelector:"#card-template",handleImageClick:f});y.addItem(t.getView())}y.renderItems(e),S.setEventListeners(),v.setEventListeners(),g.setEventListeners(),k.enableValidation(),B.enableValidation(),a.addEventListener("click",(()=>{const{name:e,description:t}=E.getUserInfo();d.value=e,m.value=t,v.open()})),l.addEventListener("click",(()=>{g.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixvQkFDakJxQyxFQUFrQmxELG1CQUNsQm1ELEVBQWlCbkQsbUJBNkJqQmhFLEVBQWVvQixpQkFBaUIsU0FBUyxLQUN2QyxNQUFNLEtBQUVwQyxFQUFJLFlBQUVLLEdBQWdCbUcsRUFBaUJFLGNBQy9DdkYsRUFBaUJvRixNQUFRdkcsRUFDekJvQixFQUF3Qm1GLE1BQVFsRyxFQUNoQ3dHLEVBQWlCckIsTUFBTSxJQUd6QnZFLEVBQVdtQixpQkFBaUIsU0FBUyxLQUNuQzJFLEVBQWlCdkIsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwd2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwd2l0aEltYWdlLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY2FyZERhdGEgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkU2VjdGlvbjogXCIuZ2FsbGVyeV9fY2FyZHNcIixcclxuICBpbmZvU2VjdGlvbjogXCIucHJvZmlsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbmZvID0ge1xyXG4gIG5hbWU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKSxcclxuICBkZXNjcmlwdGlvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKSxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZV9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgY2FyZEFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0Rm9ybUVsID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkRm9ybUVsID0gY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkRm9ybSA9IGNhcmRBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLW5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1kZXNjcmlwdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC10aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWxpbmtcIik7XHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlLXRpdGxlXCIpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmssIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljayB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUJ0bik7XHJcblxyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRlQnRuKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ0biA9ICgpID0+IHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZURlbGV0ZUJ0biA9ICgpID0+IHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH07XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ0bigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVCdG4oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdG4odGhpcy5fc3VibWl0QnRuLCB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZW5hYmxlQnRuKHRoaXMuX3N1Ym1pdEJ0biwgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5kaXNhYmxlQnRuKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2V4aXRcIik7XHJcbiAgICB0aGlzLl9tb2RhbEJhY2tncm91bmQgPVxyXG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYmFja2dyb3VuZFwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjYXBlQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX21vZGFsQmFja2dyb3VuZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cHdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0c0FyciA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKSk7XHJcblxyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICBpbnB1dHNBcnIuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy8gSU1QT1JUUyAvL1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBjYXJkRGF0YSxcclxuICBzZWxlY3RvcnMsXHJcbiAgZWRpdEZvcm1FbCxcclxuICBhZGRGb3JtRWwsXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIGNhcmRBZGRCdG4sXHJcbiAgcHJvZmlsZUluZm8sXHJcbiAgY2FyZEFkZEZvcm0sXHJcbiAgcHJvZmlsZU5hbWVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmRcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvclwiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cHdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgUG9wdXB3aXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cHdpdGhGb3JtXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5cclxuLy8gQ0xBU1NFUyAvL1xyXG5cclxuY29uc3QgcHJvZmlsZUluZm9DbGFzcyA9IG5ldyBVc2VySW5mbyhwcm9maWxlSW5mbyk7XHJcblxyXG5jb25zdCBwcm9maWxlRm9ybUNsYXNzID0gbmV3IFBvcHVwd2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuY29uc3QgY2FyZEFkZEZvcm1DbGFzcyA9IG5ldyBQb3B1cHdpdGhGb3JtKFxyXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXHJcbiAgaGFuZGxlQ2FyZEFkZFN1Ym1pdFxyXG4pO1xyXG5jb25zdCBjYXJkUHJldmlld0NsYXNzID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIpO1xyXG5jb25zdCBjYXJkU2VjdGlvbkNsYXNzID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGNhcmREYXRhLFxyXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXHJcbiAgfSxcclxuICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cclxuKTtcclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRGb3JtRWwpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhZGRGb3JtRWwpO1xyXG5cclxuLy8gSU5USVRJQUxJWkUgLy9cclxuY2FyZFNlY3Rpb25DbGFzcy5yZW5kZXJJdGVtcyhjYXJkRGF0YSk7XHJcbmNhcmRQcmV2aWV3Q2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucHJvZmlsZUZvcm1DbGFzcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jYXJkQWRkRm9ybUNsYXNzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBGVU5DVElPTlMgLy9cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkKSB7XHJcbiAgY2FyZFByZXZpZXdDbGFzcy5vcGVuKHsgbmFtZTogY2FyZC5fbmFtZSwgbGluazogY2FyZC5fbGluayB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEFkZFN1Ym1pdChkYXRhKSB7XHJcbiAgcmVuZGVyQ2FyZCh7IG5hbWU6IGRhdGEudGl0bGUsIGxpbms6IGRhdGEubGluayB9KTtcclxuICBjYXJkQWRkRm9ybUNsYXNzLmNsb3NlKCk7XHJcbiAgY2FyZEFkZEZvcm0ucmVzZXQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIHByb2ZpbGVJbmZvQ2xhc3Muc2V0VXNlckluZm8oZGF0YSk7XHJcbiAgcHJvZmlsZUZvcm1DbGFzcy5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmQpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudENsYXNzID0gbmV3IENhcmQoe1xyXG4gICAgbmFtZTogY2FyZC5uYW1lLFxyXG4gICAgbGluazogY2FyZC5saW5rLFxyXG4gICAgY2FyZFNlbGVjdG9yOiBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrOiBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gIH0pO1xyXG4gIGNhcmRTZWN0aW9uQ2xhc3MuYWRkSXRlbShjYXJkRWxlbWVudENsYXNzLmdldFZpZXcoKSk7XHJcbn1cclxuXHJcbi8vIExJU1RFTkVSUyAvL1xyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHByb2ZpbGVJbmZvQ2xhc3MuZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xyXG4gIHByb2ZpbGVGb3JtQ2xhc3Mub3BlbigpO1xyXG59KTtcclxuXHJcbmNhcmRBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjYXJkQWRkRm9ybUNsYXNzLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9qb2IudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VUaXRsZSA9XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlLXRpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcclxuXHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY2FyZERhdGEiLCJuYW1lIiwibGluayIsInByb2ZpbGVJbmZvIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZGVzY3JpcHRpb24iLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVFZGl0TW9kYWwiLCJjYXJkQWRkTW9kYWwiLCJlZGl0Rm9ybUVsIiwiYWRkRm9ybUVsIiwicHJvZmlsZUVkaXRCdG4iLCJjYXJkQWRkQnRuIiwiY2FyZEFkZEZvcm0iLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkTGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUJ0biIsIl9jYXJkRGVsZXRlQnRuIiwiX2hhbmRsZURlbGV0ZUJ0biIsIl9jYXJkSW1hZ2VFbCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImdldFZpZXciLCJfY2FyZFRpdGxlRWwiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJkaXNhYmxlQnRuIiwiX3N1Ym1pdEJ0biIsImFkZCIsImRpc2FibGVkIiwiX2VuYWJsZUJ0biIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdG4iLCJfbW9kYWxCYWNrZ3JvdW5kIiwib3BlbiIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXB3aXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHNBcnIiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcm9maWxlSW5mb0NsYXNzIiwiX2pvYiIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJfcmVmMiIsInByb2ZpbGVGb3JtQ2xhc3MiLCJkYXRhIiwiY2FyZEFkZEZvcm1DbGFzcyIsInJlbmRlckNhcmQiLCJ0aXRsZSIsInJlc2V0IiwiY2FyZFByZXZpZXdDbGFzcyIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld0ltYWdlVGl0bGUiLCJjYXJkU2VjdGlvbkNsYXNzIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImNhcmQiLCJjYXJkRWxlbWVudENsYXNzIl0sInNvdXJjZVJvb3QiOiIifQ==